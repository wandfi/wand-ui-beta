"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[941],{18624:function(e,n,t){t.d(n,{j:function(){return a}});let a=[{inputs:[{internalType:"address",name:"_wandProtocol",type:"address"},{internalType:"address",name:"_assetToken",type:"address"},{internalType:"address",name:"_assetTokenPriceFeed",type:"address"},{internalType:"address",name:"_xToken",type:"address"},{internalType:"bytes32[]",name:"assetPoolParams",type:"bytes32[]"},{internalType:"uint256[]",name:"assetPoolParamsValues",type:"uint256[]"}],stateMutability:"nonpayable",type:"constructor"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"usbTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"AssetRedeemedWithUSB",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"feeTo",type:"address"},{indexed:!1,internalType:"uint256",name:"usbTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"feeAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"AssetRedeemedWithUSBFeeCollected",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"xTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"pairedUSBAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"AssetRedeemedWithXTokens",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!0,internalType:"address",name:"feeTo",type:"address"},{indexed:!1,internalType:"uint256",name:"xTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"fee",type:"uint256"},{indexed:!1,internalType:"uint256",name:"pairedUSBAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"AssetRedeemedWithXTokensFeeCollected",type:"event"},{anonymous:!1,inputs:[{indexed:!1,internalType:"uint256",name:"interestAmount",type:"uint256"},{indexed:!1,internalType:"bool",name:"distributed",type:"bool"}],name:"InterestSettlement",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"assetTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"usbTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"USBMinted",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"bytes32",name:"param",type:"bytes32"},{indexed:!1,internalType:"uint256",name:"value",type:"uint256"}],name:"UpdateParamValue",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"usbAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"xTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"UsbToXTokens",type:"event"},{anonymous:!1,inputs:[{indexed:!0,internalType:"address",name:"user",type:"address"},{indexed:!1,internalType:"uint256",name:"assetTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"xTokenAmount",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPrice",type:"uint256"},{indexed:!1,internalType:"uint256",name:"assetTokenPriceDecimals",type:"uint256"}],name:"XTokenMinted",type:"event"},{inputs:[],name:"AAR",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"AARBelowCircuitBreakerLineTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"AARBelowSafeLineTime",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"AARDecimals",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"pure",type:"function"},{inputs:[],name:"R2",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"assetPoolCalculator",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"assetToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"assetTokenPriceFeed",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"calculateInterest",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"calculateMintUSBOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"calculateMintXTokensOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"xTokenAmount",type:"uint256"}],name:"calculatePairedUSBAmountToRedeemByXTokens",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"calculateRedemptionOutByUSB",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"calculateUSBToXTokensOut",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"checkAAR",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"getAssetToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAssetTokenPrice",outputs:[{internalType:"uint256",name:"",type:"uint256"},{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"getAssetTotalAmount",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"bytes32",name:"param",type:"bytes32"}],name:"getParamValue",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"mintUSB",outputs:[],stateMutability:"payable",type:"function"},{inputs:[{internalType:"uint256",name:"assetAmount",type:"uint256"}],name:"mintXTokens",outputs:[],stateMutability:"payable",type:"function"},{inputs:[],name:"paused",outputs:[{internalType:"bool",name:"",type:"bool"}],stateMutability:"view",type:"function"},{inputs:[],name:"r",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"redeemByUSB",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"xTokenAmount",type:"uint256"}],name:"redeemByXTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"settings",outputs:[{internalType:"contract IProtocolSettings",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"settleInterest",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"bytes32",name:"param",type:"bytes32"},{internalType:"uint256",name:"value",type:"uint256"}],name:"updateParamValue",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[{internalType:"uint256",name:"usbAmount",type:"uint256"}],name:"usbToXTokens",outputs:[],stateMutability:"nonpayable",type:"function"},{inputs:[],name:"usbToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"usbTotalSupply",outputs:[{internalType:"uint256",name:"",type:"uint256"}],stateMutability:"view",type:"function"},{inputs:[],name:"wandProtocol",outputs:[{internalType:"contract IWandProtocol",name:"",type:"address"}],stateMutability:"view",type:"function"},{inputs:[],name:"xToken",outputs:[{internalType:"address",name:"",type:"address"}],stateMutability:"view",type:"function"}]},90863:function(e,n,t){t.d(n,{q:function(){return a}});let a=10n**10n},85418:function(e,n,t){t.d(n,{B:function(){return i}});var a=t(80237);let i=()=>a.ws.id},43534:function(e,n,t){t.d(n,{C:function(){return a}});let a=[{assetTokenSymbol:"ETH",xTokenSymbol:"ETHx",assetTokenAddress:"0xEeeeeEeeeEeEeeEeEeEeeEEEeeeeEeeeeeeeEEeE",xTokenAddress:"0xF73855634cE15e2Deab0111D37ccAF0aeA737C84",poolAddress:"0x40b44716085d8f4f53F97081f561E8B669c65aB2"},{assetTokenSymbol:"WBTC",xTokenSymbol:"WBTCx",assetTokenAddress:"0xdc413E2AAc07F1B42595AcB66ca043563ff08654",xTokenAddress:"0x63B98824628ABf8c326C66e75791f6A951a5e273",poolAddress:"0xF98Bdb67Cb77525B96e66333f9c2d078f2876689"},{assetTokenSymbol:"stETH",xTokenSymbol:"stETHx",assetTokenAddress:"0x3426EDF191ca2a6C7138d6e88DEc5C3F39E57fE6",xTokenAddress:"0xD7011496029108D6BBD6B0D1DD363Ff4Efdb8283",poolAddress:"0x8647bc05eeb0Cd66E1Bf90E471CBc503D2E9A30D"}]},77941:function(e,n,t){t.r(n),t.d(n,{SwapContext:function(){return m},SwapProvider:function(){return T}});var a=t(9268),i=t(86006),s=t(19707),u=t(69624),l=t(85418),o=t(43534),p=t(18624),d=t(78676),r=t(88426),y=t(90863);let m=(0,i.createContext)({prices:[],r2s:[],rs:[],aars:[],aarss:[],aarts:[],c1s:[],assetQs:[],xQs:[],usbQs:[],allowances4pool:[],upperLimits:[],totalUpperLimit:0n,leverages:[],fundingRates:[]}),T=e=>{var n,t,T,c,b,v,f,A,k,x,M,B,C,S,w;let{children:P}=e,{address:E}=(0,s.mA)(),{data:g}=(0,s.KQ)({address:E,watch:!0,chainId:(0,l.B)()}),{data:h}=(0,s.Dm)({contracts:[...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"getAssetTokenPrice",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"getAssetTotalAmount",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.xTokenAddress,abi:u.em,functionName:"totalSupply",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"usbTotalSupply",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"R2",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"r",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"AAR",chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"getParamValue",args:[(0,d.$G)("AART",{size:32})],chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"getParamValue",args:[(0,d.$G)("C1",{size:32})],chainId:(0,l.B)()})),...o.C.map(e=>({address:e.poolAddress,abi:p.j,functionName:"getParamValue",args:[(0,d.$G)("AARS",{size:32})],chainId:(0,l.B)()})),...o.C.map(e=>({address:e.assetTokenAddress,abi:u.em,functionName:"allowance",args:[E,e.poolAddress],chainId:(0,l.B)()}))],watch:!0,enabled:!!E,allowFailure:!0}),D=o.C.length,R=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>n<D).map((e,n)=>{var t,a,i;return{symbol:null===(t=o.C[n])||void 0===t?void 0:t.assetTokenSymbol,price:(null===(a=null==e?void 0:e.result)||void 0===a?void 0:a[0])*10n**(18n-(null===(i=null==e?void 0:e.result)||void 0===i?void 0:i[1]))}}),[h]),I=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>D<=n&&n<2*D).map((e,t)=>{var a;return{symbol:null===(a=o.C[t])||void 0===a?void 0:a.assetTokenSymbol,amount:null!==(n=null==e?void 0:e.result)&&void 0!==n?n:0n}}),[h]),U=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>2*D<=n&&n<3*D).map((e,n)=>{var a;return{symbol:null===(a=o.C[n])||void 0===a?void 0:a.xTokenSymbol,amount:null!==(t=null==e?void 0:e.result)&&void 0!==t?t:0n}}),[h]),F=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>3*D<=n&&n<4*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,amount:null!==(T=null==e?void 0:e.result)&&void 0!==T?T:0n})),[h]),N=null==I?void 0:I.map((e,n)=>{var t,a,i,s;return{symbol:o.C[n].xTokenSymbol,price:(null==U?void 0:null===(t=U[n])||void 0===t?void 0:t.amount)>0n?(e.amount*(null!==(c=null==R?void 0:null===(a=R[n])||void 0===a?void 0:a.price)&&void 0!==c?c:0n)-(null==F?void 0:null===(i=F[n])||void 0===i?void 0:i.amount)*(0,r.f)("1"))/(null==U?void 0:null===(s=U[n])||void 0===s?void 0:s.amount):0n}}),j=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>4*D<=n&&n<5*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,r2:null!==(v=null==e?void 0:e.result)&&void 0!==v?v:0n})),[h,D]),X=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>5*D<=n&&n<6*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,r2:null!==(f=null==e?void 0:e.result)&&void 0!==f?f:0n})),[h,D]),Q=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>6*D<=n&&n<7*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,aar:null!==(A=null==e?void 0:e.result)&&void 0!==A?A:0n})),[h,D]),W=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>7*D<=n&&n<8*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,aart:null!==(k=null==e?void 0:e.result)&&void 0!==k?k:0n})),[h,D]),_=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>8*D<=n&&n<9*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,c1:null!==(x=null==e?void 0:e.result)&&void 0!==x?x:0n})),[h,D]),H=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>9*D<=n&&n<10*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,aars:null!==(M=null==e?void 0:e.result)&&void 0!==M?M:0n})),[h,D]),V=(0,i.useMemo)(()=>null==h?void 0:h.filter((e,n)=>10*D<=n&&n<11*D).map((e,n)=>({symbol:o.C[n].assetTokenSymbol,allowance:"ETH"===o.C[n].assetTokenSymbol?(0,r.f)("100000000000000"):null!==(B=null==e?void 0:e.result)&&void 0!==B?B:0n})),[h,D]),q=null==H?void 0:H.map((e,n)=>{var t,a;return{symbol:o.C[n].assetTokenSymbol,limit:(null==U?void 0:null===(t=U[n])||void 0===t?void 0:t.amount)*(null!==(C=null==N?void 0:null===(a=N[n])||void 0===a?void 0:a.price)&&void 0!==C?C:0n)/((null==e?void 0:e.aars)-y.q)/10n**8n}}),L=null==H?void 0:H.map((e,n)=>{var t;return{symbol:o.C[n].assetTokenSymbol,leverage:10n**8n*(y.q+y.q*y.q/((null==Q?void 0:null===(t=Q[n])||void 0===t?void 0:t.aar)-y.q))}}),O=null==q?void 0:q.reduce((e,n)=>e+n.limit,0n);console.log("xQs",U),console.log("xPrices",N),console.log("aars",Q),console.log("aarss",H),console.log("aarts",W),console.log("up",q),console.log("leverage",L),console.log(O);let z=[{symbol:"ETH",rate:(0,r.f)("0.035")},{symbol:"WBTC",rate:(0,r.f)("0.03")},{symbol:"stETH",rate:(0,r.f)("0")}];return(0,a.jsx)(m.Provider,{value:{prices:[...null!==(S=null==R?void 0:R.concat(null!=N?N:[]))&&void 0!==S?S:[],{symbol:"USB",price:(0,r.f)("1")}],r2s:null!=j?j:[],rs:null!=X?X:[],aars:null!=Q?Q:[],aarss:null!=H?H:[],aarts:null!=W?W:[],c1s:null!=_?_:[],assetQs:null!=I?I:[],usbQs:null!=F?F:[],xQs:null!=U?U:[],allowances4pool:null!=V?V:[],upperLimits:null!=q?q:[],totalUpperLimit:null!=O?O:0n,leverages:null!=L?L:[],fundingRates:z},children:P})}}}]);