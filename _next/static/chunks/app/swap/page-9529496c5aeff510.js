(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{79469:function(e,s,l){Promise.resolve().then(l.bind(l,28576))},28576:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return V}});var t=l(9268),a=l(90937),n=l(76394),i=l.n(n),d=l(27374),r=l(86006),o=l(2048),c=l(43534),x=l(82861),m=l(44028);function u(){var e;let{prices:s}=(0,r.useContext)(o.SwapContext);return console.log(s),(0,t.jsxs)("div",{className:"card w-full h-fit flex flex-col",children:[(0,t.jsxs)("h5",{className:"font-bold text-sm text-slate-700",children:["Net Value",(0,t.jsx)(m.zt,{children:(0,t.jsxs)(m.fC,{children:[(0,t.jsx)(m.xz,{asChild:!0,children:(0,t.jsx)("div",{className:"inline-block px-1",children:(0,t.jsx)(d.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,t.jsx)(m.h_,{children:(0,t.jsxs)(m.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,t.jsx)(m.Eh,{})]})})]})})]}),(0,t.jsxs)(a.iA,{className:"mt-4 text-sm",children:[(0,t.jsx)(a.ss,{}),(0,t.jsxs)(a.RM,{children:[(0,t.jsxs)(a.SC,{children:[(0,t.jsxs)(a.pj,{className:"font-medium flex gap-2 px-0",children:[(0,t.jsx)(i(),{src:"/usb.svg",width:20,height:20,alt:"usb"}),"USB"]}),(0,t.jsx)(a.pj,{children:"Universal Stable Basis"}),(0,t.jsx)(a.pj,{className:"text-right",children:"$1"})]}),null===(e=c.C)||void 0===e?void 0:e.map(e=>{var l;return(0,t.jsxs)(a.SC,{children:[(0,t.jsxs)(a.pj,{className:"font-medium flex gap-2 px-0",children:[(0,t.jsx)(i(),{src:"/".concat(e.xTokenSymbol,".svg"),width:20,height:20,alt:e.xTokenSymbol}),e.xTokenSymbol]}),(0,t.jsxs)(a.pj,{children:["Leverage on ",e.assetTokenSymbol]}),(0,t.jsxs)(a.pj,{className:"text-right",children:["$",(0,x.dq)(null==s?void 0:null===(l=s.find(s=>s.symbol===e.xTokenSymbol))||void 0===l?void 0:l.price)]})]},e.assetTokenSymbol)})]})]}),(0,t.jsx)("button",{className:"self-end text-slate-900 underline text-sm",children:"Check the leverage"})]})}var h=l(90995),f=l(12120);let v=e=>c.C.findIndex(s=>s.assetTokenSymbol===e)>-1,j=e=>c.C.findIndex(s=>s.xTokenSymbol===e)>-1,b=(e,s)=>{for(let l=0;l<c.C.length;l++){let t=[c.C[l].assetTokenSymbol,c.C[l].xTokenSymbol];if(t.findIndex(s=>s===e)>-1||t.findIndex(e=>e===s))return l}};var p=l(19707),g=l(18624),N=l(88426);let y=(e,s,l,t)=>{let{config:a}=(0,p.PJ)({address:e,abi:g.j,functionName:"mintUSB",args:[(0,N.f)(s)],enabled:(0,N.f)(s)>0&&t,value:(0,N.f)(l)}),{write:n,data:i,isLoading:d}=(0,p.GG)(a),{isLoading:r}=(0,p.BX)({hash:null==i?void 0:i.hash});return{mintUSB:n,isMintLoading:d||r}},w=e=>{let{className:s}=e;return(0,t.jsxs)("svg",{fill:"none",className:s?"text-white":"animate-spin h-5 w-5 2-ml-1 2mr-3",viewBox:"0 0 24 24",children:[(0,t.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,t.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})};var S=l(51265),k=l(85418);let B=(e,s,l,t)=>{let{config:a}=(0,p.PJ)({address:e,abi:g.j,functionName:"mintXTokens",args:[(0,N.f)(s)],enabled:!!s&&t,value:(0,N.f)(l)}),{write:n,data:i,isLoading:d}=(0,p.GG)(a),{isLoading:r}=(0,p.BX)({hash:null==i?void 0:i.hash});return{mintXToken:n,isMintXLoading:d||r}},C=(e,s,l)=>{let{config:t}=(0,p.PJ)({address:e,abi:g.j,functionName:"redeemByXTokens",args:[(0,N.f)(s)],enabled:(0,N.f)(s)>0&&l}),{write:a,data:n,isLoading:i}=(0,p.GG)(t),{isLoading:d}=(0,p.BX)({hash:null==n?void 0:n.hash});return{redeemByXToken:a,isRedeemByXTokenLoading:i||d}};var T=l(90863),U=l(89725);function L(e){let{supply:s,upperLimit:l}=e;return(0,t.jsxs)("div",{children:[(0,t.jsx)("div",{className:"text-sm text-slate-700",children:"USB Circulating Supply / Upper Limit"}),(0,t.jsx)("div",{className:"mt-2 flex items-center gap-2",children:(0,t.jsxs)(h.fC,{disabled:!0,min:0,max:l,value:[s],className:"relative flex flex-1 items-center select-none touch-none h-5",children:[(0,t.jsx)(h.fQ,{className:"bg-slate-100 relative grow rounded-full h-[3px]",children:(0,t.jsx)(h.e6,{className:"absolute bg-slate-900 rounded-full h-full"})}),(0,t.jsx)(h.bU,{className:"relative block w-3 h-3 bg-slate-900 rounded-full border-2 border-slate-900 focus:outline-none",children:(0,t.jsx)("div",{className:"text-xs text-slate-500 absolute whitespace-nowrap top-3 -translate-x-1/2",children:"".concat(s.toLocaleString()," / ").concat(l.toLocaleString())})})]})}),(0,t.jsx)("div",{className:"mt-6 text-xs text-slate-500 text-center",children:"The upper limit will grow with the demand for leverage."})]})}function M(e){let{rebalanceBonusLoss:s,reward:l,isBonus:a}=e;return(0,t.jsxs)("div",{className:"text-sm",children:[(0,t.jsxs)("div",{className:"flex justify-between",children:[(0,t.jsx)("div",{className:"text-slate-700",children:"Rebalance bonus/loss"}),(0,t.jsx)("div",{className:"".concat(a?"text-green-400":"text-red-400"),children:s})]}),(0,t.jsxs)("div",{className:"flex justify-between mt-3",children:[(0,t.jsx)("div",{className:"text-slate-700",children:"Reward"}),(0,t.jsxs)("div",{className:"text-slate-900",children:["$",l," Wand"]})]})]})}function R(){var e,s,l,a,n,i,d;let{prices:m,r2s:u}=(0,r.useContext)(o.SwapContext),[h,R]=(0,r.useState)(""),[V,_]=(0,r.useState)("ETH"),[E,I]=(0,r.useState)("USB"),X=(0,r.useMemo)(()=>c.C.reduce((e,s)=>e.concat([s.assetTokenSymbol,s.xTokenSymbol]),["USB"]),[]),q=(0,r.useMemo)(()=>"USB"===V?X.filter(e=>e!==V):v(V)?["USB",V+"x"]:j(V)?[V.replace("x","")]:X,[X,V]);(0,r.useEffect)(()=>I(q[0]),[V,q]);let z=(0,r.useMemo)(()=>b(V,E),[V,E]),A=(0,r.useMemo)(()=>{var e,s;return null===(s=c.C)||void 0===s?void 0:null===(e=s[null!=z?z:0])||void 0===e?void 0:e.poolAddress},[z]),G=(0,r.useMemo)(()=>{var e,s;return null===(s=c.C)||void 0===s?void 0:null===(e=s[null!=z?z:0])||void 0===e?void 0:e.assetTokenSymbol},[z]),P=null!==(a=null==u?void 0:null===(e=u.find(e=>e.symbol===G))||void 0===e?void 0:e.r2)&&void 0!==a?a:0n,{mintUSB:O,isMintLoading:Y}=y(A,h,"ETH"===V?h:"0",P!==T.q&&"USB"===E),{mintXToken:H,isMintXLoading:J}=B(A,h,"ETH"===V?h:"0",v(V)&&j(E)),{redeemByXToken:$,isRedeemByXTokenLoading:F}=C(A,h,j(V)),{data:W}=(0,p.do)({address:A,abi:g.j,functionName:"calculateMintUSBOut",args:[(0,N.f)(h)],chainId:(0,k.B)(),enabled:(0,N.f)(h)>0&&"USB"===E}),{data:Q}=(0,p.do)({address:A,abi:g.j,functionName:"calculateMintXTokensOut",args:[(0,N.f)(h)],chainId:(0,k.B)(),enabled:(0,N.f)(h)>0&&j(E)}),Z=null!==(n="USB"===E?W:Q)&&void 0!==n?n:0n,D="USB"===E?O:v(V)?H:$,K=(0,N.f)(h),ee=null!==(i=null==m?void 0:null===(s=m.find(e=>e.symbol===V))||void 0===s?void 0:s.price)&&void 0!==i?i:0n,es=null!==(d=null==m?void 0:null===(l=m.find(e=>e.symbol===E))||void 0===l?void 0:l.price)&&void 0!==d?d:0n,el=ee*K>0?(es*Z/(ee&K)-1n)*100n:0n,et="USB"===E&&P===T.q;return(0,t.jsx)("div",{className:"card w-full",children:(0,t.jsxs)(f.fC,{defaultValue:"swap",children:[(0,t.jsx)(f.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[{label:"Atomic Swap",value:"swap"},{label:"Redeem",value:"redeem"}].map(e=>{let{label:s,value:l}=e;return(0,t.jsx)(f.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:l,children:s},l)})}),(0,t.jsx)(f.VY,{value:"swap",className:"flex flex-col gap-6 mt-6",children:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsx)(S.i,{label:"Input",amount:h,setAmount:R,options:X,symbol:V,setSymbol:_,slot:(0,t.jsxs)(t.Fragment,{children:[(0,t.jsx)("div",{className:"text-sm text-slate-500 mt-1 pl-3",children:"Balance: 0.001"}),(0,t.jsx)("button",{className:"btn-secondary absolute right-24 top-1/2 -translate-y-1/2 w-fit",children:"Max"})]})}),(0,t.jsx)("div",{className:"w-12 h-12 absolute top-1/2 left-1/2 -translate-x-1/2 -translate-y-3/4 z-10 bg-white border border-slate-200 rounded-full flex items-center justify-center",children:(0,t.jsx)(U.YRR,{className:"stroke-slate-900 w-6 h-6"})}),(0,t.jsx)(S.i,{className:"mt-3",label:"Receive",amount:(0,x.dq)(Z),setAmount:R,options:q,symbol:E,setSymbol:I,slot:(0,t.jsx)("div",{className:"text-sm text-slate-500 mt-1 pl-3",children:"Balance: 0.001"})})]}),(0,t.jsx)("div",{className:"text-xs text-red-500 -mt-5 h-[20px]",children:et&&(0,t.jsx)(t.Fragment,{children:"USB minting has reached limit in this pool, please use other assets for minting."})}),(0,t.jsx)(L,{supply:1232232.98,upperLimit:3239323}),(0,t.jsx)(M,{rebalanceBonusLoss:et?"Mint Pause":(0,x.dq)(el)+"%",isBonus:el>0,reward:32}),(0,t.jsxs)("button",{className:"btn-primary flex items-center justify-center gap-4",onClick:D,disabled:!D||Y||J||F,children:[(Y||J||F)&&(0,t.jsx)(w,{}),"Buy"]})]})}),(0,t.jsxs)(f.VY,{value:"redeem",className:"flex flex-col gap-3",children:[(0,t.jsx)("div",{className:"text-sm text-slate-500",children:"Tipï¼šRedemption requires both x and $USB"}),(0,t.jsxs)("div",{children:[(0,t.jsx)(S.i,{options:[],label:"Input",slot:(0,t.jsxs)("div",{className:"flex items-center mt-1 ",children:[(0,t.jsx)("div",{className:"text-sm text-slate-500 pl-3",children:"Balance: 0.001"}),(0,t.jsx)("div",{className:"text-sm text-slate-500 pl-3",children:"Requires pairing with 2,323.22 USB"}),(0,t.jsx)("button",{className:"inline-block text-indigo-500 text-sm underline ml-auto",children:"Not enough? Buy Now."})]})}),(0,t.jsx)(S.i,{className:"mt-3",options:[],label:"Receive",slot:(0,t.jsx)("div",{className:"text-sm text-slate-500 mt-1 pl-3",children:"Balance: 0.001"})})]}),(0,t.jsx)("div",{className:"text-right text-sm text-slate-500",children:"Redemption fee: 0.5%"}),(0,t.jsx)("button",{className:"btn-primary",children:"Redeem"})]})]})})}function V(){return(0,t.jsxs)("div",{className:"flex flex-col md:flex-row w-full gap-3",children:[(0,t.jsx)(R,{}),(0,t.jsx)(u,{})]})}},51265:function(e,s,l){"use strict";l.d(s,{i:function(){return o}});var t=l(9268),a=l(32726),n=l(63831),i=l(27374),d=l(76394),r=l.n(d);function o(e){let{className:s,options:l=[],label:d,slot:o,symbol:c,setSymbol:x,amount:m,setAmount:u}=e;return(0,t.jsxs)("div",{className:"relative",children:[(0,t.jsxs)("div",{className:(0,n.Z)("relative",s),children:[(0,t.jsx)("div",{className:"absolute top-2 left-3 font-medium text-sm text-slate-700",children:d}),(0,t.jsx)("input",{type:"number",className:"w-full h-16 pt-6 pl-3 font-bold text-2xl border text-slate-700 border-slate-200 rounded-md focus:ring-2 focus:outline-blue-500",placeholder:"0.00",value:m,onChange:e=>u(e.target.value)}),(0,t.jsxs)(a.fC,{disabled:(null==l?void 0:l.length)<2,defaultValue:c,value:c,onValueChange:e=>x(e),children:[(0,t.jsxs)(a.xz,{className:"flex h-4 items-center absolute right-3 bottom-3",children:[(0,t.jsx)(a.B4,{className:"bg-white mr-1",placeholder:""}),(null==l?void 0:l.length)>=2?(0,t.jsx)(a.JO,{children:(0,t.jsx)(i.kWQ,{})}):null]}),(0,t.jsx)(a.h_,{children:(0,t.jsx)(a.VY,{className:"bg-white shadow-lg border p-1 rounded-md",children:(0,t.jsx)(a.l_,{children:null==l?void 0:l.map(e=>(0,t.jsx)(a.ck,{className:"flex px-4 py-2 text-sm rounded- gap-2 hover:bg-slate-100 cursor-pointer",value:e,children:(0,t.jsx)(a.eT,{children:(0,t.jsxs)("div",{className:"flex items-center leading-4 font-medium",children:[(0,t.jsx)(r(),{width:16,height:16,src:"/".concat(e,".svg"),alt:"",style:{display:"inline-block",marginRight:4}}),e]})})},e))})})})]})]}),o]})}}},function(e){e.O(0,[287,524,405,420,170,937,761,719,730,597,314,253,961,744],function(){return e(e.s=79469)}),_N_E=e.O()}]);