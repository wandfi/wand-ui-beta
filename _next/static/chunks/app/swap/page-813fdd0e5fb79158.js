(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[998],{79469:function(e,s,l){Promise.resolve().then(l.bind(l,28576))},28576:function(e,s,l){"use strict";l.r(s),l.d(s,{default:function(){return L}});var n=l(9268),t=l(50006),a=l(76394),i=l.n(a),d=l(27374),r=l(86006),o=l(2048),c=l(43534),u=l(82861);function x(){var e;let{prices:s}=(0,r.useContext)(o.SwapContext);return console.log(s),(0,n.jsxs)("div",{className:"card w-full h-fit flex flex-col",children:[(0,n.jsxs)("h5",{className:"font-bold text-sm text-slate-700",children:["Net Value",(0,n.jsx)(d.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})]}),(0,n.jsxs)(t.iA,{className:"mt-4 text-sm",children:[(0,n.jsx)(t.ss,{}),(0,n.jsxs)(t.RM,{children:[(0,n.jsxs)(t.SC,{children:[(0,n.jsxs)(t.pj,{className:"font-medium flex gap-2 px-0",children:[(0,n.jsx)(i(),{src:"/usb.svg",width:20,height:20,alt:"usb"}),"USB"]}),(0,n.jsx)(t.pj,{children:"Leverage on USB"}),(0,n.jsx)(t.pj,{className:"text-right",children:"$1"})]}),null===(e=c.C)||void 0===e?void 0:e.map(e=>{var l;return(0,n.jsxs)(t.SC,{children:[(0,n.jsxs)(t.pj,{className:"font-medium flex gap-2 px-0",children:[(0,n.jsx)(i(),{src:"/".concat(e.xTokenSymbol,".svg"),width:20,height:20,alt:e.xTokenSymbol}),e.xTokenSymbol]}),(0,n.jsxs)(t.pj,{children:["Leverage on ",e.assetTokenSymbol]}),(0,n.jsxs)(t.pj,{className:"text-right",children:["$",(0,u.dq)(null==s?void 0:null===(l=s.find(s=>s.symbol===e.xTokenSymbol))||void 0===l?void 0:l.price)]})]},e.assetTokenSymbol)})]})]}),(0,n.jsx)("button",{className:"self-end text-slate-900 underline text-sm",children:"Check the leverage"})]})}var m=l(90995);let h=e=>c.C.findIndex(s=>s.assetTokenSymbol===e)>-1,f=e=>c.C.findIndex(s=>s.xTokenSymbol===e)>-1,v=(e,s)=>{for(let l=0;l<c.C.length;l++){let n=[c.C[l].assetTokenSymbol,c.C[l].xTokenSymbol];if(n.findIndex(s=>s===e)>-1||n.findIndex(e=>e===s))return l}};var j=l(19707),b=l(18624),p=l(88426);let g=(e,s,l,n)=>{let{config:t}=(0,j.PJ)({address:e,abi:b.j,functionName:"mintUSB",args:[(0,p.f)(s)],enabled:(0,p.f)(s)>0&&n,value:(0,p.f)(l)}),{write:a,data:i,isLoading:d}=(0,j.GG)(t),{isLoading:r}=(0,j.BX)({hash:null==i?void 0:i.hash});return{mintUSB:a,isMintLoading:d||r}},N=e=>{let{className:s}=e;return(0,n.jsxs)("svg",{fill:"none",className:s?"text-white":"animate-spin h-5 w-5 2-ml-1 2mr-3",viewBox:"0 0 24 24",children:[(0,n.jsx)("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),(0,n.jsx)("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})};var S=l(51265),y=l(85418);let w=(e,s,l,n)=>{let{config:t}=(0,j.PJ)({address:e,abi:b.j,functionName:"mintXTokens",args:[(0,p.f)(s)],enabled:!!s&&n,value:(0,p.f)(l)}),{write:a,data:i,isLoading:d}=(0,j.GG)(t),{isLoading:r}=(0,j.BX)({hash:null==i?void 0:i.hash});return{mintXToken:a,isMintXLoading:d||r}},k=(e,s,l)=>{let{config:n}=(0,j.PJ)({address:e,abi:b.j,functionName:"redeemByXTokens",args:[(0,p.f)(s)],enabled:(0,p.f)(s)>0&&l}),{write:t,data:a,isLoading:i}=(0,j.GG)(n),{isLoading:d}=(0,j.BX)({hash:null==a?void 0:a.hash});return{redeemByXToken:t,isRedeemByXTokenLoading:i||d}};var B=l(90863);function C(){return(0,n.jsxs)("div",{children:[(0,n.jsx)("div",{className:"text-sm text-slate-700",children:"USB Circulating Supply / Upper Limit"}),(0,n.jsxs)("div",{className:"mt-2 flex items-center gap-2",children:[(0,n.jsxs)(m.fC,{className:"relative flex flex-1 items-center select-none touch-none h-5",children:[(0,n.jsx)(m.fQ,{className:"bg-slate-100 relative grow rounded-full h-[3px]",children:(0,n.jsx)(m.e6,{className:"absolute bg-slate-900 rounded-full h-full"})}),(0,n.jsx)(m.bU,{className:"block w-4 h-4 bg-white rounded-full border-2 border-slate-900 focus:outline-none"})]}),(0,n.jsx)("input",{type:"number",className:"w-12 h-7 rounded-md border border-slate-200"})]}),(0,n.jsx)("div",{className:"mt-2 text-xs text-slate-500 text-center",children:"The upper limit will grow with the demand for leverage."})]})}function T(e){let{rebalanceBonusLoss:s,reward:l,isBonus:t}=e;return(0,n.jsxs)("div",{className:"text-sm",children:[(0,n.jsxs)("div",{className:"flex justify-between",children:[(0,n.jsx)("div",{className:"text-slate-700",children:"Rebalance bonus/loss"}),(0,n.jsx)("div",{className:"".concat(t?"text-green-400":"text-red-400"),children:s})]}),(0,n.jsxs)("div",{className:"flex justify-between mt-3",children:[(0,n.jsx)("div",{className:"text-slate-700",children:"Reward"}),(0,n.jsxs)("div",{className:"text-slate-900",children:["$",l," Wand"]})]})]})}function U(){var e,s,l,t,a,i,d;let{prices:x,r2s:m}=(0,r.useContext)(o.SwapContext),[U,L]=(0,r.useState)(""),[M,X]=(0,r.useState)("ETH"),[_,E]=(0,r.useState)("USB"),I=(0,r.useMemo)(()=>c.C.reduce((e,s)=>e.concat([s.assetTokenSymbol,s.xTokenSymbol]),["USB"]),[]),G=(0,r.useMemo)(()=>"USB"===M?I.filter(e=>e!==M):h(M)?["USB",M+"x"]:f(M)?[M.replace("x","")]:I,[I,M]);(0,r.useEffect)(()=>E(G[0]),[M,G]);let R=(0,r.useMemo)(()=>v(M,_),[M,_]),q=(0,r.useMemo)(()=>{var e,s;return null===(s=c.C)||void 0===s?void 0:null===(e=s[null!=R?R:0])||void 0===e?void 0:e.poolAddress},[R]),A=(0,r.useMemo)(()=>{var e,s;return null===(s=c.C)||void 0===s?void 0:null===(e=s[null!=R?R:0])||void 0===e?void 0:e.assetTokenSymbol},[R]),O=null!==(t=null==m?void 0:null===(e=m.find(e=>e.symbol===A))||void 0===e?void 0:e.r2)&&void 0!==t?t:0n,{mintUSB:P,isMintLoading:V}=g(q,U,"ETH"===M?U:"0",O!==B.q&&"USB"===_),{mintXToken:H,isMintXLoading:J}=w(q,U,"ETH"===M?U:"0",h(M)&&f(_)),{redeemByXToken:z,isRedeemByXTokenLoading:W}=k(q,U,f(M)),{data:$}=(0,j.do)({address:q,abi:b.j,functionName:"calculateMintUSBOut",args:[(0,p.f)(U)],chainId:(0,y.B)(),enabled:(0,p.f)(U)>0&&"USB"===_}),{data:Q}=(0,j.do)({address:q,abi:b.j,functionName:"calculateMintXTokensOut",args:[(0,p.f)(U)],chainId:(0,y.B)(),enabled:(0,p.f)(U)>0&&f(_)}),F=null!==(a="USB"===_?$:Q)&&void 0!==a?a:0n,Y="USB"===_?P:h(M)?H:z,Z=(0,p.f)(U),D=null!==(i=null==x?void 0:null===(s=x.find(e=>e.symbol===M))||void 0===s?void 0:s.price)&&void 0!==i?i:0n,K=null!==(d=null==x?void 0:null===(l=x.find(e=>e.symbol===_))||void 0===l?void 0:l.price)&&void 0!==d?d:0n,ee=D*Z>0?(K*F/(D&Z)-1n)*100n:0n,es="USB"===_&&O===B.q;return(0,n.jsxs)("div",{className:"card w-full flex flex-col gap-6",children:[(0,n.jsxs)("div",{children:[(0,n.jsx)(S.i,{label:"Input",amount:U,setAmount:L,options:I,symbol:M,setSymbol:X,className:"mb-4"}),(0,n.jsx)(S.i,{label:"Receive",amount:(0,u.dq)(F),setAmount:L,options:G,symbol:_,setSymbol:E})]}),(0,n.jsx)("div",{className:"text-xs text-red-500 -mt-5 h-[20px]",children:es&&(0,n.jsx)(n.Fragment,{children:"USB minting has reached limit in this pool, please use other assets for minting."})}),(0,n.jsx)(C,{}),(0,n.jsx)(T,{rebalanceBonusLoss:es?"Mint Pause":(0,u.dq)(ee)+"%",isBonus:ee>0,reward:32}),(0,n.jsxs)("button",{className:"btn-primary flex items-center justify-center gap-4",onClick:Y,disabled:!Y||V||J||W,children:[(V||J||W)&&(0,n.jsx)(N,{}),"Buy"]})]})}function L(){return(0,n.jsxs)("div",{className:"flex flex-col md:flex-row w-full gap-3",children:[(0,n.jsx)(U,{}),(0,n.jsx)(x,{})]})}},51265:function(e,s,l){"use strict";l.d(s,{i:function(){return o}});var n=l(9268),t=l(72932),a=l(63831),i=l(27374),d=l(76394),r=l.n(d);function o(e){let{className:s,options:l,label:d,slot:o,symbol:c,setSymbol:u,amount:x,setAmount:m}=e;return(0,n.jsxs)("div",{children:[(0,n.jsxs)("div",{className:(0,a.Z)("relative",s),children:[(0,n.jsx)("div",{className:"absolute top-2 left-3 font-medium text-sm text-slate-700",children:d}),(0,n.jsx)("input",{type:"number",className:"w-full h-16 pt-6 pl-3 font-bold text-2xl border text-slate-700 border-slate-200 rounded-md focus:ring-2 focus:outline-blue-500",placeholder:"0.00",value:x,onChange:e=>m(e.target.value)}),(0,n.jsxs)(t.fC,{disabled:l.length<2,defaultValue:c,value:c,onValueChange:e=>u(e),children:[(0,n.jsxs)(t.xz,{className:"flex h-4 items-center absolute right-3 bottom-3",children:[(0,n.jsx)(t.B4,{className:"bg-white mr-1",placeholder:""}),l.length>=2?(0,n.jsx)(t.JO,{children:(0,n.jsx)(i.kWQ,{})}):null]}),(0,n.jsx)(t.h_,{children:(0,n.jsx)(t.VY,{className:"bg-white shadow-lg border p-1 rounded-md",children:(0,n.jsx)(t.l_,{children:l.map(e=>(0,n.jsx)(t.ck,{className:"flex px-4 py-2 text-sm rounded- gap-2 hover:bg-slate-100 cursor-pointer",value:e,children:(0,n.jsx)(t.eT,{children:(0,n.jsxs)("div",{className:"flex items-center leading-4 font-medium",children:[(0,n.jsx)(r(),{width:16,height:16,src:"/".concat(e,".svg"),alt:"",style:{display:"inline-block",marginRight:4}}),e]})})},e))})})})]})]}),o]})}}},function(e){e.O(0,[524,405,714,170,978,6,828,14,323,314,253,961,744],function(){return e(e.s=79469)}),_N_E=e.O()}]);