(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{79043:function(e,s,t){"use strict";t.d(s,{i:function(){return l.Z},r:function(){return a.Z}});var l=t(68114),a=t(77832)},26295:function(e,s,t){Promise.resolve().then(t.bind(t,41522))},41522:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return Vaults}});var l=t(57437),a=t(91056),n=t(72009),i=t(99057),d=t(20373),o=t(79043),c=t(16691),r=t.n(c),u=t(2265),x=t(81628),m=t(75224),v=t(31851),h=t(75646),f=t(63326),b=t(68938),j=t(56760),g=t(71824);function NetValue(e){var s,t,o;let{asset:c}=e,{prices:N,vaultsState:S}=(0,u.useContext)(i.FetcherContext),y=n.iK[(0,a.B)()][0],k=null!==(s=N["".concat(c,"x")])&&void 0!==s?s:0n,T=S[y.vault],A=Math.max(0,1+1/((0,x.pF)(null!==(t=null==T?void 0:T.aar)&&void 0!==t?t:0n,null!==(o=null==T?void 0:T.AARDecimals)&&void 0!==o?o:0n)-1));return(0,l.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,l.jsx)(m.zt,{children:(0,l.jsxs)(m.fC,{children:[(0,l.jsx)(m.xz,{asChild:!0,children:(0,l.jsx)("div",{className:"inline-block px-1",children:(0,l.jsx)(g.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,l.jsx)(m.h_,{children:(0,l.jsxs)(m.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,l.jsx)(m.Eh,{})]})})]})}),(0,l.jsxs)(v.Z,{className:"mt-4 text-sm font-normal",children:[(0,l.jsx)(b.Z,{}),(0,l.jsxs)(h.Z,{children:[(0,l.jsxs)(j.Z,{children:[(0,l.jsxs)(f.Z,{className:"flex gap-2 px-0",children:[(0,l.jsx)(r(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,l.jsx)(f.Z,{children:"Universal Stable Basis"}),(0,l.jsx)(f.Z,{}),(0,l.jsx)(f.Z,{className:"text-right",children:"$1"})]}),(0,l.jsxs)(j.Z,{children:[(0,l.jsxs)(f.Z,{className:"flex gap-2 px-0",children:[(0,l.jsx)(r(),{src:"/".concat(c+"x",".svg"),width:20,height:20,alt:"ETHx"}),c,"x"]}),(0,l.jsxs)(f.Z,{children:[(0,l.jsxs)("span",{className:"text-base text-slate-700",children:[A.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,l.jsx)(f.Z,{}),(0,l.jsxs)(f.Z,{className:"text-right",children:["$",(0,d.dq)(k)]})]})]})]})]})}var N=t(76036),S=t(80547),y=t(1150),k=t(90228),T=t(85156),A=t(8580),p=t(34522),B=t(41697),w=t(35769),U=t(56926);let Z="$USB";function VaultCard(e){var s,t,o,c,r,m,v,h,f;let{asset:b}=e,{balances:j,prices:g,vaultsMode:M}=(0,u.useContext)(i.FetcherContext),q=n.iK[(0,a.B)()].find(e=>e.assetTokenSymbol==b),P=n.jX[(0,a.B)()],R=M[q.assetTokenSymbol],[C,V]=(0,u.useState)("mint"),[E,H]=(0,u.useMemo)(()=>{let e="mint"==C;return 3==R?["Adjustment Model--High AAR",e?"Minting ".concat(Z," alone is feasible"):"Redeeming ".concat(q.xTokenSymbol," alone is feasible")]:2==R?["Adjustment Model--Low AAR",e?"Minting ".concat(q.xTokenSymbol," alone is feasible"):"Redeeming ".concat(Z," alone is feasible")]:["Stability Model",e?"".concat(Z," and ").concat(q.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(Z," and ").concat(q.xTokenSymbol)]},[R,q,C]),[L,F]=(0,u.useState)(""),[W,_]=(0,u.useState)(""),[$,z]=(0,u.useState)(""),K=null!==(h=g[q.assetTokenSymbol])&&void 0!==h?h:0n,O=null!==(f=g[q.xTokenSymbol])&&void 0!==f?f:0n,D=(0,u.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.find(e=>e.symbol===b))||void 0===e?void 0:e.balance},[j]),Y=(0,u.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[j]),X=(0,u.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.find(e=>e.symbol===b+"x"))||void 0===e?void 0:e.balance},[j]),[I,G]=(0,u.useState)(""),[J,Q]=(0,u.useState)(""),[ee,es]=(0,u.useState)("USB"),{data:[et,el,ea]=[void 0,void 0,void 0]}=(0,U.Dm)({contracts:[{abi:k.Z,address:P,functionName:R>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[q.vault,(0,x.su)(L||"0")]},{abi:k.Z,address:P,functionName:"calcMintUsbAboveAARU",args:[q.vault,(0,x.su)(L||"0")]},{abi:k.Z,address:P,functionName:"calcMintLeveragedTokensBelowAARS",args:[q.vault,(0,x.su)(L||"0")]}],watch:!0,enabled:"mint"==C}),en=(null==et?void 0:null===(s=et.result)||void 0===s?void 0:s[1])||0n,ei=(null==et?void 0:null===(t=et.result)||void 0===t?void 0:t[2])||0n,ed=(null==el?void 0:null===(o=el.result)||void 0===o?void 0:o[1])||0n,eo=(null==ea?void 0:null===(c=ea.result)||void 0===c?void 0:c[1])||0n,{data:[ec,er,eu,ex,em]=[void 0,void 0,void 0,void 0,void 0]}=(0,U.Dm)({contracts:[{abi:k.Z,address:P,functionName:"calcPairedRedeemAssetAmount",args:[q.vault,(0,x.su)($||"0")]},{abi:k.Z,address:P,functionName:"calcPairdLeveragedTokenAmount",args:[q.vault,(0,x.su)(W||"0")]},{abi:k.Z,address:P,functionName:"calcPairedUsbAmount",args:[q.vault,(0,x.su)($||"0")]},{abi:k.Z,address:P,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[q.vault,(0,x.su)($||"0")]},{abi:k.Z,address:P,functionName:"calcRedeemByUsbBelowAARS",args:[q.vault,(0,x.su)(W||"0")]}],watch:!0,enabled:"redeem"==C}),ev=(null==ec?void 0:null===(r=ec.result)||void 0===r?void 0:r[1])||0n,eh=(null==er?void 0:er.result)||0n,ef=(null==eu?void 0:eu.result)||0n,eb=(null==ex?void 0:null===(m=ex.result)||void 0===m?void 0:m[1])||0n,ej=(null==em?void 0:null===(v=em.result)||void 0===v?void 0:v[1])||0n,eg=J==q.xTokenSymbol,eN="USB"==J,eS=(0,u.useMemo)(()=>{let e={abi:y.Z,address:q.vault,args:[(0,x.su)(L)],value:q.assetTokenAddress==n.K8?(0,x.su)(L):0n,functionName:"mintPairsAtAdjustmentPhase"};return(0==R||1==R)&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==I&&(e.functionName="mintUSBAboveAARU"),I==q.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[R,I,L,q]),ey=(0,u.useMemo)(()=>{let e={abi:y.Z,address:q.vault,functionName:"USB"==J?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==J?[(0,x.su)(W)]:[(0,x.su)($)]};return J==q.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,x.su)($)]),"USB"==J&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,x.su)(W)]),e},[R,J,W,$,q]),ek=I==q.xTokenSymbol?0n:"USB"===I?ed:en,eT="USB"==I?0n:I===q.xTokenSymbol?eo:ei,eA="USB"==ee?W:(0,d.dq)(ef),ep=ee==q.xTokenSymbol?$:(0,d.dq)(eh),eB=eg?eb:eN?ej:ev;return(0,l.jsxs)("div",{className:(0,w.m)("card relative",R>1?"!bg-violet-500/10":""),children:[(0,l.jsxs)("div",{className:"absolute top-[29px] right-6 flex flex-col items-end",children:[(0,l.jsxs)("div",{className:"text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit",children:[(0,l.jsx)("div",{className:(0,w.m)("w-3 h-3 rounded-full","Stability Model"==E?"bg-green-500":"bg-violet-500")}),(0,l.jsx)("div",{className:"text-indigo-700",children:E})]}),(0,l.jsx)("div",{className:"text-xs text-neutral-500",children:H})]}),(0,l.jsx)("div",{className:"relative flex items-center justify-between",children:(0,l.jsxs)(p.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>V(e),children:[(0,l.jsxs)(p.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,l.jsx)(p.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,l.jsx)(p.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,l.jsx)(p.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(S.W,{asset:b,exchange:(0,d.dq)(K*(0,x.su)(L)/A.Pq),balance:(0,d.dq)(D),amount:L,setAmount:F}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(B.gPZ,{})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(S.W,{amount:(0,d.ZM)(ek),onClick:()=>{G(3==R?"USB":"")},asset:"USB",exchange:(0,d.dq)(ek),readonly:!0,disable:R<=1,selected:"USB"===I}),(0,l.jsx)(S.W,{amount:(0,d.ZM)(eT),onClick:()=>{G(2==R?q.xTokenSymbol:"")},asset:q.xTokenSymbol,exchange:(0,d.dq)(O*(null!=eT?eT:0n)/A.Pq),readonly:!0,disable:R<=1,selected:I===q.xTokenSymbol})]}),(0,l.jsx)(N.v,{tx:"Mint",config:eS,approves:{[q.assetTokenAddress]:(0,x.su)(L)},spender:q.vault})]})}),(0,l.jsx)(p.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(S.W,{amount:eg?"0":eA,setAmount:_,balance:(0,d.dq)(Y),onClick:()=>{Q(2==R?"USB":""),es("USB")},asset:"USB",exchange:(0,d.dq)((0,x.su)(W)),readonly:J==q.xTokenSymbol,selected:"USB"===J}),(0,l.jsx)(S.W,{amount:eN?"0":ep,setAmount:z,asset:q.xTokenSymbol,onClick:()=>{Q(3==R?q.xTokenSymbol:""),es(q.xTokenSymbol)},exchange:(0,d.dq)((0,x.su)($)*O/A.Pq),balance:(0,d.dq)(X),readonly:"USB"==J,selected:J===q.xTokenSymbol})]}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(B.gPZ,{})}),(0,l.jsx)(S.W,{asset:q.assetTokenSymbol,amount:(0,d.dq)(eB),exchange:(0,d.dq)(K*(null!=eB?eB:0n)/A.Pq),readonly:!0}),(0,l.jsx)(N.v,{tx:"Redeem",config:ey,approves:eN?{[T.O[(0,a.B)()]]:(0,x.su)(W)}:eg?{[q.xTokenAddress]:(0,x.su)($)}:{[q.xTokenAddress]:(0,x.su)($),[T.O[(0,a.B)()]]:(0,x.su)(W)},spender:q.vault})]})})]})})]})}function VaultNetToken(e){var s;let{vc:t,showX:a}=e,n=a?t.xTokenSymbol:t.assetTokenSymbol,{prices:o}=(0,u.useContext)(i.FetcherContext),c=null!==(s=(0,d.dq)(o[n]))&&void 0!==s?s:"1";return(0,l.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(r(),{width:32,height:32,src:"/".concat(n,".svg"),alt:"token"}),(0,l.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:n})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"text-lg",children:["$",c]})})]})}function Vaults(){var e,s,t;let{aar:c,assetLocked:x,prices:m}=(0,u.useContext)(i.FetcherContext),v=n.iK[(0,a.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,l.jsxs)("div",{className:"w-full max-w-screen-xl px-4 mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,l.jsxs)(o.r,{numItemsMd:2,className:"gap-3 mt-4",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,l.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(VaultNetToken,{vc:v}),(0,l.jsx)(VaultNetToken,{vc:v,showX:!0})]})}),(0,l.jsx)(o.i,{}),(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,l.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,l.jsx)(r(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,l.jsxs)("div",{children:[(0,d.dq)(x.ETH),(0,l.jsxs)("span",{children:["(~$",(0,d.dq)((null!==(e=x.ETH)&&void 0!==e?e:0n)*(null!==(s=m.ETH)&&void 0!==s?s:0n)/10n**18n),")"]})]})]})]}),(0,l.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,l.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,l.jsxs)("div",{children:[((null!==(t=c.ETH)&&void 0!==t?t:0)*100).toFixed(),"%"]})})]})]}),(0,l.jsx)(NetValue,{asset:"ETH"})]}),(0,l.jsx)(VaultCard,{asset:"ETH"})]})]})}}},function(e){e.O(0,[27,33,61,986,335,129,424,273,363,98,646,203,342,971,472,744],function(){return e(e.s=26295)}),_N_E=e.O()}]);