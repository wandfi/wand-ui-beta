(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{31851:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("Table"),d=l.forwardRef((e,t)=>{let{children:s,className:n}=e,d=(0,a.__rest)(e,["children","className"]);return l.createElement("div",{className:(0,r.q)(i("root"),"overflow-auto",n)},l.createElement("table",Object.assign({ref:t,className:(0,r.q)(i("table"),"w-full tabular-nums text-tremor-default","text-tremor-content","dark:text-dark-tremor-content")},d),s))});d.displayName="Table"},75646:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("TableBody"),d=l.forwardRef((e,t)=>{let{children:s,className:n}=e,d=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("tbody",Object.assign({ref:t,className:(0,r.q)(i("root"),"align-top overflow-x-auto divide-y","divide-tremor-border","dark:divide-dark-tremor-border",n)},d),s))});d.displayName="TableBody"},63326:function(e,t,s){"use strict";s.d(t,{Z:function(){return c}});var a=s(50044),l=s(2265),n=s(37517),r=s(93568),i=s(76503);let d=(0,r.fn)("TableCell"),c=l.forwardRef((e,t)=>{let{children:s,className:r}=e,c=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("td",Object.assign({ref:t,className:(0,i.q)(d("root"),"align-middle whitespace-nowrap tabular-nums text-left",n.W.twoXl.paddingAll,r)},c),s))});c.displayName="TableCell"},68938:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("TableHead"),d=l.forwardRef((e,t)=>{let{children:s,className:n}=e,d=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("thead",Object.assign({ref:t,className:(0,r.q)(i("root"),"text-left","text-tremor-content","dark:text-dark-tremor-content",n)},d),s))});d.displayName="TableHead"},56760:function(e,t,s){"use strict";s.d(t,{Z:function(){return d}});var a=s(50044),l=s(2265),n=s(93568),r=s(76503);let i=(0,n.fn)("TableRow"),d=l.forwardRef((e,t)=>{let{children:s,className:n}=e,d=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("tr",Object.assign({ref:t,className:(0,r.q)(i("row"),n)},d),s))});d.displayName="TableRow"},79043:function(e,t,s){"use strict";s.d(t,{i:function(){return a.Z},r:function(){return l.Z}});var a=s(68114),l=s(77832)},26295:function(e,t,s){Promise.resolve().then(s.bind(s,41522))},41522:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Vaults}});var a=s(57437),l=s(91056),n=s(72009),r=s(99057),i=s(20373),d=s(79043),c=s(16691),o=s.n(c),m=s(2265),u=s(81628),x=s(31851),f=s(75646),h=s(63326),b=s(68938),v=s(56760),j=s(64020);function NetValue(e){let{asset:t}=e,{prices:s,vaultsState:d}=(0,m.useContext)(r.FetcherContext),c=n.iK[(0,l.B)()][0],N=(0,u.ok)(s,"".concat(t,"x")),g=d[c.vault],k=Math.max(0,1+1/((0,u.pF)((0,u.ok)(g,"aar"),(0,u.ok)(g,"AARDecimals"))-1));return(0,a.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,a.jsx)(j.C,{children:"The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies."}),(0,a.jsxs)(x.Z,{className:"mt-4 text-sm font-normal",children:[(0,a.jsx)(b.Z,{}),(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(h.Z,{className:"flex gap-2 px-0",children:[(0,a.jsx)(o(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,a.jsx)(h.Z,{children:"Universal Stable Basis"}),(0,a.jsx)(h.Z,{}),(0,a.jsx)(h.Z,{className:"text-right",children:"$1"})]}),(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(h.Z,{className:"flex gap-2 px-0",children:[(0,a.jsx)(o(),{src:"/".concat(t+"x",".svg"),width:20,height:20,alt:"ETHx"}),t,"x"]}),(0,a.jsxs)(h.Z,{children:[(0,a.jsxs)("span",{className:"text-base text-slate-700",children:[k.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,a.jsx)(h.Z,{}),(0,a.jsxs)(h.Z,{className:"text-right",children:["$",(0,i.dq)(N)]})]})]})]})]})}var N=s(76036),g=s(80547),k=s(1150),y=s(90228),S=s(8580),T=s(34522),p=s(41697),w=s(35769),A=s(56926);let B="$USB";function VaultCard(e){let{asset:t}=e,{balances:s,prices:d,vaultsMode:c}=(0,m.useContext)(r.FetcherContext),o=n.iK[(0,l.B)()].find(e=>e.assetTokenSymbol==t),x=n.jX[(0,l.B)()],f=c[o.assetTokenSymbol],[h,b]=(0,m.useState)("mint"),[v,j]=(0,m.useMemo)(()=>{let e="mint"==h;return 3==f?["Adjustment Model--High AAR",e?"Minting ".concat(B," alone is feasible"):"Redeeming ".concat(o.xTokenSymbol," alone is feasible")]:2==f?["Adjustment Model--Low AAR",e?"Minting ".concat(o.xTokenSymbol," alone is feasible"):"Redeeming ".concat(B," alone is feasible")]:["Stability Model",e?"".concat(B," and ").concat(o.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(B," and ").concat(o.xTokenSymbol)]},[f,o,h]),[U,Z]=(0,m.useState)(""),[R,E]=(0,m.useState)(""),[q,C]=(0,m.useState)(""),M=(0,u.ok)(d,o.assetTokenSymbol),P=(0,u.ok)(d,o.xTokenSymbol),V=(0,m.useMemo)(()=>(0,u.ok)(null==s?void 0:s.find(e=>e.symbol===t),"balance"),[s]),_=(0,m.useMemo)(()=>(0,u.ok)(null==s?void 0:s.find(e=>"USB"===e.symbol),"balance"),[s]),H=(0,m.useMemo)(()=>(0,u.ok)(null==s?void 0:s.find(e=>e.symbol===t+"x"),"balance"),[s]),[F,L]=(0,m.useState)(""),[O,W]=(0,m.useState)(""),[$,z]=(0,m.useState)("USB"),{data:[K,D,X]=[void 0,void 0,void 0]}=(0,A.Dm)({contracts:[{abi:y.Z,address:x,functionName:f>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[o.vault,(0,u.su)(U||"0")]},{abi:y.Z,address:x,functionName:"calcMintUsbAboveAARU",args:[o.vault,(0,u.su)(U||"0")]},{abi:y.Z,address:x,functionName:"calcMintLeveragedTokensBelowAARS",args:[o.vault,(0,u.su)(U||"0")]}],watch:!0,enabled:"mint"==h}),Y=(0,u.ok)(K,["result",1]),I=(0,u.ok)(K,["result",2]),G=(0,u.ok)(D,["result",1]),J=(0,u.ok)(X,["result",1]),{data:[Q,ee,et,es,ea]=[void 0,void 0,void 0,void 0,void 0]}=(0,A.Dm)({contracts:[{abi:y.Z,address:x,functionName:"calcPairedRedeemAssetAmount",args:[o.vault,(0,u.su)(q||"0")]},{abi:y.Z,address:x,functionName:"calcPairdLeveragedTokenAmount",args:[o.vault,(0,u.su)(R||"0")]},{abi:y.Z,address:x,functionName:"calcPairedUsbAmount",args:[o.vault,(0,u.su)(q||"0")]},{abi:y.Z,address:x,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[o.vault,(0,u.su)(q||"0")]},{abi:y.Z,address:x,functionName:"calcRedeemByUsbBelowAARS",args:[o.vault,(0,u.su)(R||"0")]}],watch:!0,enabled:"redeem"==h}),el=(0,u.ok)(Q,["result",1]),en=(0,u.ok)(ee,["result"]),er=(0,u.ok)(et,["result"]),ei=(0,u.ok)(es,["result",1]),ed=(0,u.ok)(ea,["result",1]),ec=O==o.xTokenSymbol,eo="USB"==O,em=(0,m.useMemo)(()=>{let e={abi:k.Z,address:o.vault,args:[(0,u.su)(U)],value:o.assetTokenAddress==n.K8?(0,u.su)(U):0n,functionName:"mintPairsAtAdjustmentPhase"};return f<=1&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==F&&(e.functionName="mintUSBAboveAARU"),F==o.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[f,F,U,o]),eu=(0,m.useMemo)(()=>{let e={abi:k.Z,address:o.vault,functionName:"USB"==O?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==O?[(0,u.su)(R)]:[(0,u.su)(q)]};return O==o.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,u.su)(q)]),"USB"==O&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,u.su)(R)]),e},[f,O,R,q,o]),ex=F==o.xTokenSymbol?0n:"USB"===F?G:Y,ef="USB"==F?0n:F===o.xTokenSymbol?J:I,eh="USB"==$?R:(0,i.dq)(er),eb=$==o.xTokenSymbol?q:(0,i.dq)(en),ev=ec?ei:eo?ed:el;return(0,a.jsxs)("div",{className:(0,w.m)("card relative",f>1?"!bg-violet-500/10":""),children:[(0,a.jsxs)("div",{className:"mb-1 ssm:mb-0 ssm:absolute top-[29px] right-6 flex flex-col items-end",children:[(0,a.jsxs)("div",{className:(0,w.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,w.m)("w-3 h-3 rounded-full","Stability Model"==v?"bg-green-500":"bg-red-500")}),(0,a.jsx)("div",{className:(0,w.m)("Stability Model"==v?"text-green-500":"text-red-500"),children:v})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:j})]}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsxs)(T.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>b(e),children:[(0,a.jsxs)(T.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,a.jsx)(T.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,a.jsx)(T.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,a.jsx)(T.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(g.W,{asset:t,exchange:(0,i.dq)(M*(0,u.su)(U)/S.Pq),balance:V,amount:U,setAmount:Z}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(p.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.W,{amount:(0,i.ZM)(ex),onClick:()=>{L(3==f?"USB":"")},asset:"USB",exchange:(0,i.dq)(ex),readonly:!0,disable:f<=1,selected:"USB"===F}),(0,a.jsx)(g.W,{amount:(0,i.ZM)(ef),onClick:()=>{L(2==f?o.xTokenSymbol:"")},asset:o.xTokenSymbol,exchange:(0,i.dq)(P*ef/S.Pq),readonly:!0,disable:f<=1,selected:F===o.xTokenSymbol})]}),(0,a.jsx)(N.v,{tx:"Mint",disabled:(0,u.su)(U)>V,onTxSuccess:()=>{Z("")},config:em,approves:{[o.assetTokenAddress]:(0,u.su)(U)},spender:o.vault})]})}),(0,a.jsx)(T.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.W,{amount:ec?"0":eh,setAmount:E,balance:_,onClick:()=>{W(2==f?"USB":""),z("USB")},asset:"USB",exchange:(0,i.dq)(ec?0n:(0,u.su)(eh)),readonly:O==o.xTokenSymbol,selected:"USB"===O}),(0,a.jsx)(g.W,{amount:eo?"0":eb,setAmount:C,asset:o.xTokenSymbol,onClick:()=>{W(3==f?o.xTokenSymbol:""),z(o.xTokenSymbol)},exchange:(0,i.dq)(eo?0n:(0,u.su)(eb)*P/S.Pq),balance:H,readonly:"USB"==O,selected:O===o.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(p.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(g.W,{asset:o.assetTokenSymbol,amount:(0,i.dq)(ev),exchange:(0,i.dq)(M*ev/S.Pq),readonly:!0}),(0,a.jsx)(N.v,{tx:"Redeem",config:eu,disabled:(0,u.su)(eh)>_||(0,u.su)(eb)>H,onTxSuccess:()=>{E(""),C(""),W(""),z("USB")},approves:eo?{[n.O1[(0,l.B)()]]:(0,u.su)(R)}:ec?{[o.xTokenAddress]:(0,u.su)(q)}:{[o.xTokenAddress]:(0,u.su)(q),[n.O1[(0,l.B)()]]:(0,u.su)(R)},spender:o.vault})]})})]})})]})}function VaultNetToken(e){let{vc:t,showX:s}=e,l=s?t.xTokenSymbol:t.assetTokenSymbol,{prices:n}=(0,m.useContext)(r.FetcherContext),d=(0,i.dq)(n[l])||"1";return(0,a.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)(o(),{width:32,height:32,src:"/".concat(l,".svg"),alt:"token"}),(0,a.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:l})]}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"text-lg",children:["$",d]})})]})}function Vaults(){let{aar:e,assetLocked:t,prices:s}=(0,m.useContext)(r.FetcherContext),c=n.iK[(0,l.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,a.jsxs)("div",{className:"w-full max-w-screen-xl px-4 mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,a.jsxs)(d.r,{numItemsMd:2,className:"gap-3 mt-4",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,a.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:c&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(VaultNetToken,{vc:c}),(0,a.jsx)(VaultNetToken,{vc:c,showX:!0})]})}),(0,a.jsx)(d.i,{}),(0,a.jsxs)("div",{className:"w-full flex justify-between",children:[(0,a.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,a.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,a.jsx)(o(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,a.jsxs)("div",{children:[(0,i.dq)(t.ETH),(0,a.jsxs)("span",{children:["(~$",(0,i.dq)((0,u.ok)(t,"ETH")*(0,u.ok)(s,"ETH")/S.Pq),")"]})]})]})]}),(0,a.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,a.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,a.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,a.jsxs)("div",{children:[(100*(e.ETH||0)).toFixed(),"%"]})})]})]}),(0,a.jsx)(NetValue,{asset:"ETH"})]}),(0,a.jsx)(VaultCard,{asset:"ETH"})]})]})}},64020:function(e,t,s){"use strict";s.d(t,{C:function(){return Tip}});var a=s(57437),l=s(75224),n=s(71824);function Tip(e){let{children:t}=e;return(0,a.jsx)(l.zt,{children:(0,a.jsxs)(l.fC,{children:[(0,a.jsx)(l.xz,{asChild:!0,children:(0,a.jsx)("div",{className:"inline-block px-1",style:{verticalAlign:"text-bottom"},children:(0,a.jsx)(n.if7,{className:"inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:[t,(0,a.jsx)(l.Eh,{})]})})]})})}}},function(e){e.O(0,[27,33,61,986,149,725,818,602,857,203,975,971,472,744],function(){return e(e.s=26295)}),_N_E=e.O()}]);