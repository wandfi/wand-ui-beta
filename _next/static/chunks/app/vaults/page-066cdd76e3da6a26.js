(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{26341:function(e,s,t){Promise.resolve().then(t.bind(t,96873))},96873:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var l=t(9268),a=t(85418),n=t(43534),i=t(42485),d=t(82861),o=t(35931),c=t(76394),r=t.n(c),u=t(86006),x=t(68010),m=t(82036),v=t(27374);function h(e){var s,t,c;let{asset:h}=e,{prices:j,vaultsState:f}=(0,u.useContext)(i.FetcherContext),b=n.iK[(0,a.B)()][0],g=null!==(s=j["".concat(h,"x")])&&void 0!==s?s:0n,S=f[b.vault],N=Math.max(0,1+1/((0,x.pF)(null!==(t=null==S?void 0:S.aar)&&void 0!==t?t:0n,null!==(c=null==S?void 0:S.AARDecimals)&&void 0!==c?c:0n)-1));return(0,l.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,l.jsx)(m.zt,{children:(0,l.jsxs)(m.fC,{children:[(0,l.jsx)(m.xz,{asChild:!0,children:(0,l.jsx)("div",{className:"inline-block px-1",children:(0,l.jsx)(v.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,l.jsx)(m.h_,{children:(0,l.jsxs)(m.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,l.jsx)(m.Eh,{})]})})]})}),(0,l.jsxs)(o.iA,{className:"mt-4 text-sm font-normal",children:[(0,l.jsx)(o.ss,{}),(0,l.jsxs)(o.RM,{children:[(0,l.jsxs)(o.SC,{children:[(0,l.jsxs)(o.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(r(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,l.jsx)(o.pj,{children:"Universal Stable Basis"}),(0,l.jsx)(o.pj,{}),(0,l.jsx)(o.pj,{className:"text-right",children:"$1"})]}),(0,l.jsxs)(o.SC,{children:[(0,l.jsxs)(o.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(r(),{src:"/".concat(h+"x",".svg"),width:20,height:20,alt:"ETHx"}),h,"x"]}),(0,l.jsxs)(o.pj,{children:[(0,l.jsxs)("span",{className:"text-base text-slate-700",children:[N.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,l.jsx)(o.pj,{}),(0,l.jsxs)(o.pj,{className:"text-right",children:["$",(0,d.dq)(g)]})]})]})]})]})}var j=t(83455),f=t(78592),b=t(52815),g=t(67992),S=t(56883),N=t(82899),y=t(12120),p=t(87782),k=t(2002),A=t(19707);let T="$USB";function B(e){var s,t,o,c,r,m,v,h,B;let{asset:w}=e,{balances:U,prices:M,vaultsMode:q}=(0,u.useContext)(i.FetcherContext),R=n.iK[(0,a.B)()].find(e=>e.assetTokenSymbol==w),P=n.jX[(0,a.B)()],C=q[R.assetTokenSymbol],[E,Z]=(0,u.useState)("mint"),[H,L]=(0,u.useMemo)(()=>{let e="mint"==E;return 3==C?["Adjustment Model--High AAR",e?"Minting ".concat(T," alone is feasible"):"Redeeming ".concat(R.xTokenSymbol," alone is feasible")]:2==C?["Adjustment Model--Low AAR",e?"Minting ".concat(R.xTokenSymbol," alone is feasible"):"Redeeming ".concat(T," alone is feasible")]:["Stability Model",e?"".concat(T," and ").concat(R.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(T," and ").concat(R.xTokenSymbol)]},[C,R,E]),[V,F]=(0,u.useState)(""),[W,_]=(0,u.useState)(""),[z,$]=(0,u.useState)(""),K=null!==(h=M[R.assetTokenSymbol])&&void 0!==h?h:0n,O=null!==(B=M[R.xTokenSymbol])&&void 0!==B?B:0n,D=(0,u.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>e.symbol===w))||void 0===e?void 0:e.balance},[U]),Y=(0,u.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[U]),X=(0,u.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>e.symbol===w+"x"))||void 0===e?void 0:e.balance},[U]),[I,G]=(0,u.useState)(""),[J,Q]=(0,u.useState)(""),[ee,es]=(0,u.useState)("USB"),{data:[et,el,ea]=[void 0,void 0,void 0]}=(0,A.Dm)({contracts:[{abi:g.Z,address:P,functionName:C>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[R.vault,(0,x.su)(V||"0")]},{abi:g.Z,address:P,functionName:"calcMintUsbAboveAARU",args:[R.vault,(0,x.su)(V||"0")]},{abi:g.Z,address:P,functionName:"calcMintLeveragedTokensBelowAARS",args:[R.vault,(0,x.su)(V||"0")]}],watch:!0,enabled:"mint"==E}),{data:[en,ei,ed,eo,ec]=[void 0,void 0,void 0,void 0,void 0]}=(0,A.Dm)({contracts:[{abi:g.Z,address:P,functionName:"calcPairedRedeemAssetAmount",args:[R.vault,(0,x.su)(z||"0")]},{abi:g.Z,address:P,functionName:"calcPairdLeveragedTokenAmount",args:[R.vault,(0,x.su)(W||"0")]},{abi:g.Z,address:P,functionName:"calcPairedUsbAmount",args:[R.vault,(0,x.su)(z||"0")]},{abi:g.Z,address:P,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[R.vault,(0,x.su)(z||"0")]},{abi:g.Z,address:P,functionName:"calcRedeemByUsbBelowAARS",args:[R.vault,(0,x.su)(W||"0")]}],watch:!0,enabled:"redeem"==E}),er=J==R.xTokenSymbol,eu="USB"==J,ex=(0,u.useMemo)(()=>{let e={abi:b.Z,address:R.vault,args:[(0,x.su)(V)],value:R.assetTokenAddress==n.K8?(0,x.su)(V):0n,functionName:"mintPairsAtAdjustmentPhase"};return(0==C||1==C)&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==I&&(e.functionName="mintUSBAboveAARU"),I==R.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[C,I,V,R]),em=(0,u.useMemo)(()=>{let e={abi:b.Z,address:R.vault,functionName:"USB"==J?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==J?[(0,x.su)(W)]:[(0,x.su)(z)]};return J==R.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,x.su)(z)]),"USB"==J&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,x.su)(W)]),e},[C,J,W,z,R]),ev=I==R.xTokenSymbol?0n:"USB"===I?null==el?void 0:null===(s=el.result)||void 0===s?void 0:s[1]:null==et?void 0:null===(t=et.result)||void 0===t?void 0:t[1],eh="USB"==I?0n:I===R.xTokenSymbol?null==ea?void 0:null===(o=ea.result)||void 0===o?void 0:o[1]:null==et?void 0:null===(c=et.result)||void 0===c?void 0:c[2],ej="USB"==ee?W:(0,d.dq)(null==ed?void 0:ed.result),ef=ee==R.xTokenSymbol?z:(0,d.dq)(null==ei?void 0:ei.result),eb=er?null==eo?void 0:null===(r=eo.result)||void 0===r?void 0:r[1]:eu?null==ec?void 0:null===(m=ec.result)||void 0===m?void 0:m[1]:null==en?void 0:null===(v=en.result)||void 0===v?void 0:v[1];return(0,l.jsxs)("div",{className:(0,k.m)("card relative",C>1?"!bg-violet-500/10":""),children:[(0,l.jsxs)("div",{className:"absolute top-[29px] right-6 flex flex-col items-end",children:[(0,l.jsxs)("div",{className:"text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit",children:[(0,l.jsx)("div",{className:(0,k.m)("w-3 h-3 rounded-full","Stability Model"==H?"bg-green-500":"bg-violet-500")}),(0,l.jsx)("div",{className:"text-indigo-700",children:H})]}),(0,l.jsx)("div",{className:"text-xs text-neutral-500",children:L})]}),(0,l.jsx)("div",{className:"relative flex items-center justify-between",children:(0,l.jsxs)(y.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>Z(e),children:[(0,l.jsxs)(y.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,l.jsx)(y.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,l.jsx)(y.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,l.jsx)(y.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsx)(f.W,{asset:w,exchange:(0,d.dq)(K*(0,x.su)(V)/N.Pq),balance:(0,d.dq)(D),amount:V,setAmount:F}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(p.gPZ,{})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(f.W,{amount:(0,d.ZM)(ev),onClick:()=>{G(3==C?"USB":"")},asset:"USB",exchange:(0,d.dq)(ev),readonly:!0,disable:C<=1,selected:"USB"===I}),(0,l.jsx)(f.W,{amount:(0,d.ZM)(eh),onClick:()=>{G(2==C?R.xTokenSymbol:"")},asset:R.xTokenSymbol,exchange:(0,d.dq)(O*(null!=eh?eh:0n)/N.Pq),readonly:!0,disable:C<=1,selected:I===R.xTokenSymbol})]}),(0,l.jsx)(j.v,{tx:"Mint",config:ex,approves:{[R.assetTokenAddress]:(0,x.su)(V)},spender:R.vault})]})}),(0,l.jsx)(y.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-4",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(f.W,{amount:er?0n:ej,setAmount:_,balance:(0,d.dq)(Y),onClick:()=>{Q(2==C?"USB":""),es("USB")},asset:"USB",exchange:(0,d.dq)((0,x.su)(W)),readonly:J==R.xTokenSymbol,selected:"USB"===J}),(0,l.jsx)(f.W,{amount:eu?0n:ef,setAmount:$,asset:R.xTokenSymbol,onClick:()=>{Q(3==C?R.xTokenSymbol:""),es(R.xTokenSymbol)},exchange:(0,d.dq)((0,x.su)(z)*O/N.Pq),balance:(0,d.dq)(X),readonly:"USB"==J,selected:J===R.xTokenSymbol})]}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(p.gPZ,{})}),(0,l.jsx)(f.W,{asset:R.assetTokenSymbol,amount:(0,d.dq)(eb),exchange:(0,d.dq)(K*(null!=eb?eb:0n)/N.Pq),readonly:!0}),(0,l.jsx)(j.v,{tx:"Redeem",config:em,approves:eu?{[S.O[(0,a.B)()]]:(0,x.su)(W)}:er?{[R.xTokenAddress]:(0,x.su)(z)}:{[R.xTokenAddress]:(0,x.su)(z),[S.O[(0,a.B)()]]:(0,x.su)(W)},spender:R.vault})]})})]})})]})}function w(e){var s;let{vc:t,showX:a}=e,n=a?t.xTokenSymbol:t.assetTokenSymbol,{prices:o}=(0,u.useContext)(i.FetcherContext),c=null!==(s=(0,d.dq)(o[n]))&&void 0!==s?s:"1";return(0,l.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(r(),{width:32,height:32,src:"/".concat(n,".svg"),alt:"token"}),(0,l.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:n})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"text-lg",children:["$",c]})})]})}function U(){var e,s,t;let{aar:c,assetLocked:x,prices:m}=(0,u.useContext)(i.FetcherContext),v=n.iK[(0,a.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,l.jsxs)("div",{className:"w-full max-w-screen-xl px-4 mx-auto",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,l.jsxs)(o.rj,{numItemsMd:2,className:"gap-3 mt-4",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,l.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:v&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w,{vc:v}),(0,l.jsx)(w,{vc:v,showX:!0})]})}),(0,l.jsx)(o.iz,{}),(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,l.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,l.jsx)(r(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,l.jsxs)("div",{children:[(0,d.dq)(x.ETH),(0,l.jsxs)("span",{children:["(~$",(0,d.dq)((null!==(e=x.ETH)&&void 0!==e?e:0n)*(null!==(s=m.ETH)&&void 0!==s?s:0n)/10n**18n),")"]})]})]})]}),(0,l.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,l.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,l.jsxs)("div",{children:[((null!==(t=c.ETH)&&void 0!==t?t:0)*100).toFixed(),"%"]})})]})]}),(0,l.jsx)(h,{asset:"ETH"})]}),(0,l.jsx)(B,{asset:"ETH"})]})]})}}},function(e){e.O(0,[482,166,524,656,728,216,119,778,790,624,220,49,342,916,253,961,744],function(){return e(e.s=26341)}),_N_E=e.O()}]);