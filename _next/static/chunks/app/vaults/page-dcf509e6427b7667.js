(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{26341:function(e,s,t){Promise.resolve().then(t.bind(t,96873))},96873:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var l=t(9268),a=t(76394),n=t.n(a),i=t(83455),d=t(78592),o=t(52815),c=t(67992),r=t(85418),u=t(43534),x=t(56883),m=t(68010),v=t(42485),h=t(82861),j=t(12120),f=t(86006),b=t(87782),g=t(2002),N=t(30411),S=t(19707);let y="$USB";function p(e){var s,t,a,n,p,k,A,T,w;let{asset:B}=e,{balances:U,prices:M,vaultsMode:C}=(0,f.useContext)(v.FetcherContext),R=u.iK[(0,r.B)()].find(e=>e.assetTokenSymbol==B),q=u.jX[(0,r.B)()],E=C[R.assetTokenSymbol],[P,Z]=(0,f.useState)("mint"),[H,F]=(0,f.useMemo)(()=>{let e="mint"==P;return 2==E?["Downward Adjustment Model",e?"Minting ".concat(y," alone is feasible"):"Redeeming ".concat(R.xTokenSymbol," alone is feasible")]:3==E?["Upward Adjustment Model",e?"Minting ".concat(R.xTokenSymbol," alone is feasible"):"Redeeming ".concat(y," alone is feasible")]:["Stability Model",e?"".concat(y," and ").concat(R.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(y," and ").concat(R.xTokenSymbol)]},[E,R,P]),[V,L]=(0,f.useState)(""),[W,_]=(0,f.useState)(""),[z,$]=(0,f.useState)(""),D=null!==(T=M[R.assetTokenSymbol])&&void 0!==T?T:0n,K=null!==(w=M[R.xTokenSymbol])&&void 0!==w?w:0n,O=(0,f.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>e.symbol===B))||void 0===e?void 0:e.balance},[U]),Y=(0,f.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[U]),X=(0,f.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>e.symbol===B+"x"))||void 0===e?void 0:e.balance},[U]),[I,G]=(0,f.useState)(""),[J,Q]=(0,f.useState)("USB"),{data:[ee,es,et]=[void 0,void 0,void 0]}=(0,S.Dm)({contracts:[{abi:c.Z,address:q,functionName:E>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[R.vault,(0,m.su)(V||"0")]},{abi:c.Z,address:q,functionName:"calcMintUsbAboveAARU",args:[R.vault,(0,m.su)(V||"0")]},{abi:c.Z,address:q,functionName:"calcMintLeveragedTokensBelowAARS",args:[R.vault,(0,m.su)(V||"0")]}],watch:!0,enabled:"mint"==P}),{data:[el,ea,en,ei,ed]=[void 0,void 0,void 0,void 0,void 0]}=(0,S.Dm)({contracts:[{abi:c.Z,address:q,functionName:"calcPairedRedeemAssetAmount",args:[R.vault,(0,m.su)(z||"0")]},{abi:c.Z,address:q,functionName:"calcPairdLeveragedTokenAmount",args:[R.vault,(0,m.su)(W||"0")]},{abi:c.Z,address:q,functionName:"calcPairedUsbAmount",args:[R.vault,(0,m.su)(z||"0")]},{abi:c.Z,address:q,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[R.vault,(0,m.su)(z||"0")]},{abi:c.Z,address:q,functionName:"calcRedeemByUsbBelowAARS",args:[R.vault,(0,m.su)(W||"0")]}],watch:!0,enabled:"redeem"==P}),eo=2==E&&J==R.xTokenSymbol,ec=3==E&&"USB"==J,er=(0,f.useMemo)(()=>{let e={abi:o.Z,address:R.vault,args:[(0,m.su)(V)],value:R.assetTokenAddress==u.K8?(0,m.su)(V):0n,functionName:"mintPairsAtAdjustmentPhase"};return(0==E||1==E)&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==I&&(e.functionName="mintUSBAboveAARU"),I==R.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[E,I,V,R]),eu=(0,f.useMemo)(()=>{let e={abi:o.Z,address:R.vault,functionName:"USB"==J?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==J?[(0,m.su)(W)]:[(0,m.su)(z)]};return 2==E&&J==R.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,m.su)(z)]),3==E&&"USB"==J&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,m.su)(W)]),e},[E,J,W,z,R]),ex="USB"===I?null==es?void 0:null===(s=es.result)||void 0===s?void 0:s[1]:null==ee?void 0:null===(t=ee.result)||void 0===t?void 0:t[1],em=I===R.xTokenSymbol?null==et?void 0:null===(a=et.result)||void 0===a?void 0:a[1]:null==ee?void 0:null===(n=ee.result)||void 0===n?void 0:n[2];(0,f.useEffect)(()=>{"USB"==J||eo||_((0,h.dq)(null==en?void 0:en.result)),J==R.xTokenSymbol||ec||$((0,h.dq)(null==ea?void 0:ea.result)),ec&&$(""),eo&&_("")},[ec,eo,J,en,ea]);let ev=eo?null==ei?void 0:null===(p=ei.result)||void 0===p?void 0:p[1]:ec?null==ed?void 0:null===(k=ed.result)||void 0===k?void 0:k[1]:null==el?void 0:null===(A=el.result)||void 0===A?void 0:A[1];return(0,l.jsxs)("div",{className:(0,g.m)("card relative","Stability Model"==H?"bg-green-500/5":"bg-violet-500/5"),children:[(0,l.jsxs)("div",{className:"absolute top-[29px] right-6 flex flex-col items-end",children:[(0,l.jsxs)("div",{className:"text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit",children:[(0,l.jsx)("div",{className:(0,g.m)("w-3 h-3 rounded-full","Stability Model"==H?"bg-green-500":"bg-violet-500")}),(0,l.jsx)("div",{className:"text-indigo-700",children:H})]}),(0,l.jsx)("div",{className:"text-xs text-neutral-500",children:F})]}),(0,l.jsx)("div",{className:"relative flex items-center justify-between",children:(0,l.jsxs)(j.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>Z(e),children:[(0,l.jsxs)(j.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,l.jsx)(j.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,l.jsx)(j.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,l.jsx)(j.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(d.W,{asset:B,exchange:(0,h.dq)(D*(0,N.v)(V,0)),balance:(0,h.dq)(O),amount:V,setAmount:L}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(b.gPZ,{})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(d.W,{amount:(0,h.ZM)(ex),onClick:()=>{G(2==E?"USB":"")},asset:"USB",exchange:(0,h.dq)(ex),readonly:!0,disable:E<=1,selected:"USB"===I}),(0,l.jsx)(d.W,{amount:(0,h.ZM)(em),onClick:()=>{G(3==E?R.xTokenSymbol:"")},asset:R.xTokenSymbol,exchange:(0,h.dq)(K*(null!=em?em:0n)/10n**18n),readonly:!0,disable:E<=1,selected:I===R.xTokenSymbol})]}),(0,l.jsx)(i.v,{tx:"Mint",config:er,approves:{[R.assetTokenAddress]:(0,m.su)(V)},spender:R.vault})]})}),(0,l.jsx)(j.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(d.W,{amount:W,setAmount:_,balance:(0,h.dq)(Y),onClick:()=>{Q("USB")},asset:"USB",exchange:(0,h.dq)((0,N.v)(W,18)),selected:"USB"===J}),(0,l.jsx)(d.W,{amount:z,setAmount:$,asset:R.xTokenSymbol,onClick:()=>{Q(R.xTokenSymbol)},exchange:(0,h.dq)((0,N.v)(z,18)*K/10n**18n),balance:(0,h.dq)(X),selected:J===R.xTokenSymbol})]}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(b.gPZ,{})}),(0,l.jsx)(d.W,{asset:R.assetTokenSymbol,amount:(0,h.dq)(ev),exchange:(0,h.dq)(D*(null!=ev?ev:0n)/10n**18n),readonly:!0}),(0,l.jsx)(i.v,{tx:"Redeem",config:eu,approves:{[R.xTokenAddress]:(0,m.su)(z),[x.O[(0,r.B)()]]:(0,m.su)(W)},spender:R.vault})]})})]})})]})}var k=t(35931),A=t(82036),T=t(27374);function w(e){var s,t,a;let{asset:i}=e,{prices:d,vaultsState:o}=(0,f.useContext)(v.FetcherContext),c=u.iK[(0,r.B)()][0],x=null!==(s=d["".concat(i,"x")])&&void 0!==s?s:0n,j=o[c.vault],b=1+1/((0,m.pF)(null!==(t=null==j?void 0:j.aar)&&void 0!==t?t:0n,null!==(a=null==j?void 0:j.AARDecimals)&&void 0!==a?a:0n)-1);return(0,l.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,l.jsx)(A.zt,{children:(0,l.jsxs)(A.fC,{children:[(0,l.jsx)(A.xz,{asChild:!0,children:(0,l.jsx)("div",{className:"inline-block px-1",children:(0,l.jsx)(T.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,l.jsx)(A.h_,{children:(0,l.jsxs)(A.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,l.jsx)(A.Eh,{})]})})]})}),(0,l.jsxs)(k.iA,{className:"mt-4 text-sm font-normal",children:[(0,l.jsx)(k.ss,{}),(0,l.jsxs)(k.RM,{children:[(0,l.jsxs)(k.SC,{children:[(0,l.jsxs)(k.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(n(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,l.jsx)(k.pj,{children:"Universal Stable Basis"}),(0,l.jsx)(k.pj,{}),(0,l.jsx)(k.pj,{className:"text-right",children:"$1"})]}),(0,l.jsxs)(k.SC,{children:[(0,l.jsxs)(k.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(n(),{src:"/".concat(i+"x",".svg"),width:20,height:20,alt:"ETHx"}),i,"x"]}),(0,l.jsxs)(k.pj,{children:[(0,l.jsxs)("span",{className:"text-base text-slate-700",children:[b.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,l.jsx)(k.pj,{}),(0,l.jsxs)(k.pj,{className:"text-right",children:["$",(0,h.dq)(x)]})]})]})]})]})}var B=t(30633);function U(e){var s,t;let{vc:a,showX:i}=e,d=i?a.xTokenSymbol:a.assetTokenSymbol,{prices:o}=(0,f.useContext)(v.FetcherContext),c=null!==(s=(0,h.dq)(o[d]))&&void 0!==s?s:"1";return parseFloat((0,B.d)(null!==(t=o[d])&&void 0!==t?t:1n)),(0,l.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(n(),{width:32,height:32,src:"/".concat(d,".svg"),alt:"token"}),(0,l.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:d})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"text-lg",children:["$",c]})})]})}function M(){var e,s,t;let{aar:a,assetLocked:i,prices:d}=(0,f.useContext)(v.FetcherContext),o=u.iK[(0,r.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,l.jsxs)("div",{className:"min-h-screen",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,l.jsxs)(k.rj,{numItemsMd:2,className:"gap-3 mt-8",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,l.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U,{vc:o}),(0,l.jsx)(U,{vc:o,showX:!0})]})}),(0,l.jsx)(k.iz,{}),(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,l.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,l.jsx)(n(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,l.jsxs)("div",{children:[(0,h.dq)(i.ETH),(0,l.jsxs)("span",{children:["(~$",(0,h.dq)((null!==(e=i.ETH)&&void 0!==e?e:0n)*(null!==(s=d.ETH)&&void 0!==s?s:0n)/10n**18n),")"]})]})]})]}),(0,l.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,l.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,l.jsxs)("div",{children:[((null!==(t=a.ETH)&&void 0!==t?t:0)*100).toFixed(),"%"]})})]})]}),(0,l.jsx)(w,{asset:"ETH"})]}),(0,l.jsx)(p,{asset:"ETH"})]})]})}}},function(e){e.O(0,[482,166,524,656,728,948,119,778,790,624,220,742,342,916,253,961,560],function(){return e(e.s=26341)}),_N_E=e.O()}]);