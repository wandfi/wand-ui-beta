(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{31851:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(50044),l=s(2265),n=s(93568),i=s(76503);let d=(0,n.fn)("Table"),r=l.forwardRef((e,t)=>{let{children:s,className:n}=e,r=(0,a.__rest)(e,["children","className"]);return l.createElement("div",{className:(0,i.q)(d("root"),"overflow-auto",n)},l.createElement("table",Object.assign({ref:t,className:(0,i.q)(d("table"),"w-full tabular-nums text-tremor-default","text-tremor-content","dark:text-dark-tremor-content")},r),s))});r.displayName="Table"},75646:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(50044),l=s(2265),n=s(93568),i=s(76503);let d=(0,n.fn)("TableBody"),r=l.forwardRef((e,t)=>{let{children:s,className:n}=e,r=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("tbody",Object.assign({ref:t,className:(0,i.q)(d("root"),"align-top overflow-x-auto divide-y","divide-tremor-border","dark:divide-dark-tremor-border",n)},r),s))});r.displayName="TableBody"},63326:function(e,t,s){"use strict";s.d(t,{Z:function(){return o}});var a=s(50044),l=s(2265),n=s(37517),i=s(93568),d=s(76503);let r=(0,i.fn)("TableCell"),o=l.forwardRef((e,t)=>{let{children:s,className:i}=e,o=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("td",Object.assign({ref:t,className:(0,d.q)(r("root"),"align-middle whitespace-nowrap tabular-nums text-left",n.W.twoXl.paddingAll,i)},o),s))});o.displayName="TableCell"},68938:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(50044),l=s(2265),n=s(93568),i=s(76503);let d=(0,n.fn)("TableHead"),r=l.forwardRef((e,t)=>{let{children:s,className:n}=e,r=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("thead",Object.assign({ref:t,className:(0,i.q)(d("root"),"text-left","text-tremor-content","dark:text-dark-tremor-content",n)},r),s))});r.displayName="TableHead"},56760:function(e,t,s){"use strict";s.d(t,{Z:function(){return r}});var a=s(50044),l=s(2265),n=s(93568),i=s(76503);let d=(0,n.fn)("TableRow"),r=l.forwardRef((e,t)=>{let{children:s,className:n}=e,r=(0,a.__rest)(e,["children","className"]);return l.createElement(l.Fragment,null,l.createElement("tr",Object.assign({ref:t,className:(0,i.q)(d("row"),n)},r),s))});r.displayName="TableRow"},79043:function(e,t,s){"use strict";s.d(t,{i:function(){return a.Z},r:function(){return l.Z}});var a=s(68114),l=s(77832)},26295:function(e,t,s){Promise.resolve().then(s.bind(s,41522))},41522:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return Vaults}});var a=s(57437),l=s(91056),n=s(72009),i=s(99057),d=s(20373),r=s(79043),o=s(16691),c=s.n(o),u=s(2265),m=s(81628),x=s(31851),v=s(75646),f=s(63326),h=s(68938),b=s(56760),j=s(64020);function NetValue(e){var t,s,r;let{asset:o}=e,{prices:N,vaultsState:g}=(0,u.useContext)(i.FetcherContext),y=n.iK[(0,l.B)()][0],S=null!==(t=N["".concat(o,"x")])&&void 0!==t?t:0n,T=g[y.vault],k=Math.max(0,1+1/((0,m.pF)(null!==(s=null==T?void 0:T.aar)&&void 0!==s?s:0n,null!==(r=null==T?void 0:T.AARDecimals)&&void 0!==r?r:0n)-1));return(0,a.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,a.jsx)(j.C,{children:"The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies."}),(0,a.jsxs)(x.Z,{className:"mt-4 text-sm font-normal",children:[(0,a.jsx)(h.Z,{}),(0,a.jsxs)(v.Z,{children:[(0,a.jsxs)(b.Z,{children:[(0,a.jsxs)(f.Z,{className:"flex gap-2 px-0",children:[(0,a.jsx)(c(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,a.jsx)(f.Z,{children:"Universal Stable Basis"}),(0,a.jsx)(f.Z,{}),(0,a.jsx)(f.Z,{className:"text-right",children:"$1"})]}),(0,a.jsxs)(b.Z,{children:[(0,a.jsxs)(f.Z,{className:"flex gap-2 px-0",children:[(0,a.jsx)(c(),{src:"/".concat(o+"x",".svg"),width:20,height:20,alt:"ETHx"}),o,"x"]}),(0,a.jsxs)(f.Z,{children:[(0,a.jsxs)("span",{className:"text-base text-slate-700",children:[k.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,a.jsx)(f.Z,{}),(0,a.jsxs)(f.Z,{className:"text-right",children:["$",(0,d.dq)(S)]})]})]})]})]})}var N=s(76036),g=s(80547),y=s(1150),S=s(90228),T=s(85156),k=s(8580),p=s(34522),w=s(41697),A=s(35769),B=s(56926);let U="$USB";function VaultCard(e){var t,s,r,o,c,x,v,f,h;let{asset:b}=e,{balances:j,prices:Z,vaultsMode:R}=(0,u.useContext)(i.FetcherContext),q=n.iK[(0,l.B)()].find(e=>e.assetTokenSymbol==b),E=n.jX[(0,l.B)()],C=R[q.assetTokenSymbol],[M,P]=(0,u.useState)("mint"),[V,_]=(0,u.useMemo)(()=>{let e="mint"==M;return 3==C?["Adjustment Model--High AAR",e?"Minting ".concat(U," alone is feasible"):"Redeeming ".concat(q.xTokenSymbol," alone is feasible")]:2==C?["Adjustment Model--Low AAR",e?"Minting ".concat(q.xTokenSymbol," alone is feasible"):"Redeeming ".concat(U," alone is feasible")]:["Stability Model",e?"".concat(U," and ").concat(q.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(U," and ").concat(q.xTokenSymbol)]},[C,q,M]),[H,F]=(0,u.useState)(""),[L,O]=(0,u.useState)(""),[W,$]=(0,u.useState)(""),z=null!==(f=Z[q.assetTokenSymbol])&&void 0!==f?f:0n,K=null!==(h=Z[q.xTokenSymbol])&&void 0!==h?h:0n,D=(0,u.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.find(e=>e.symbol===b))||void 0===e?void 0:e.balance},[j]),X=(0,u.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[j]),Y=(0,u.useMemo)(()=>{var e;return null==j?void 0:null===(e=j.find(e=>e.symbol===b+"x"))||void 0===e?void 0:e.balance},[j]),[I,G]=(0,u.useState)(""),[J,Q]=(0,u.useState)(""),[ee,et]=(0,u.useState)("USB"),{data:[es,ea,el]=[void 0,void 0,void 0]}=(0,B.Dm)({contracts:[{abi:S.Z,address:E,functionName:C>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[q.vault,(0,m.su)(H||"0")]},{abi:S.Z,address:E,functionName:"calcMintUsbAboveAARU",args:[q.vault,(0,m.su)(H||"0")]},{abi:S.Z,address:E,functionName:"calcMintLeveragedTokensBelowAARS",args:[q.vault,(0,m.su)(H||"0")]}],watch:!0,enabled:"mint"==M}),en=(null==es?void 0:null===(t=es.result)||void 0===t?void 0:t[1])||0n,ei=(null==es?void 0:null===(s=es.result)||void 0===s?void 0:s[2])||0n,ed=(null==ea?void 0:null===(r=ea.result)||void 0===r?void 0:r[1])||0n,er=(null==el?void 0:null===(o=el.result)||void 0===o?void 0:o[1])||0n,{data:[eo,ec,eu,em,ex]=[void 0,void 0,void 0,void 0,void 0]}=(0,B.Dm)({contracts:[{abi:S.Z,address:E,functionName:"calcPairedRedeemAssetAmount",args:[q.vault,(0,m.su)(W||"0")]},{abi:S.Z,address:E,functionName:"calcPairdLeveragedTokenAmount",args:[q.vault,(0,m.su)(L||"0")]},{abi:S.Z,address:E,functionName:"calcPairedUsbAmount",args:[q.vault,(0,m.su)(W||"0")]},{abi:S.Z,address:E,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[q.vault,(0,m.su)(W||"0")]},{abi:S.Z,address:E,functionName:"calcRedeemByUsbBelowAARS",args:[q.vault,(0,m.su)(L||"0")]}],watch:!0,enabled:"redeem"==M}),ev=(null==eo?void 0:null===(c=eo.result)||void 0===c?void 0:c[1])||0n,ef=(null==ec?void 0:ec.result)||0n,eh=(null==eu?void 0:eu.result)||0n,eb=(null==em?void 0:null===(x=em.result)||void 0===x?void 0:x[1])||0n,ej=(null==ex?void 0:null===(v=ex.result)||void 0===v?void 0:v[1])||0n,eN=J==q.xTokenSymbol,eg="USB"==J,ey=(0,u.useMemo)(()=>{let e={abi:y.Z,address:q.vault,args:[(0,m.su)(H)],value:q.assetTokenAddress==n.K8?(0,m.su)(H):0n,functionName:"mintPairsAtAdjustmentPhase"};return(0==C||1==C)&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==I&&(e.functionName="mintUSBAboveAARU"),I==q.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[C,I,H,q]),eS=(0,u.useMemo)(()=>{let e={abi:y.Z,address:q.vault,functionName:"USB"==J?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==J?[(0,m.su)(L)]:[(0,m.su)(W)]};return J==q.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,m.su)(W)]),"USB"==J&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,m.su)(L)]),e},[C,J,L,W,q]),eT=I==q.xTokenSymbol?0n:"USB"===I?ed:en,ek="USB"==I?0n:I===q.xTokenSymbol?er:ei,ep="USB"==ee?L:(0,d.dq)(eh),ew=ee==q.xTokenSymbol?W:(0,d.dq)(ef),eA=eN?eb:eg?ej:ev;return(0,a.jsxs)("div",{className:(0,A.m)("card relative",C>1?"!bg-violet-500/10":""),children:[(0,a.jsxs)("div",{className:"mb-1 ssm:mb-0 ssm:absolute top-[29px] right-6 flex flex-col items-end",children:[(0,a.jsxs)("div",{className:(0,A.m)("text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit"),children:[(0,a.jsx)("div",{className:(0,A.m)("w-3 h-3 rounded-full","Stability Model"==V?"bg-green-500":"bg-red-500")}),(0,a.jsx)("div",{className:(0,A.m)("Stability Model"==V?"text-green-500":"text-red-500"),children:V})]}),(0,a.jsx)("div",{className:"text-xs text-neutral-500",children:_})]}),(0,a.jsx)("div",{className:"relative flex items-center justify-between",children:(0,a.jsxs)(p.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>P(e),children:[(0,a.jsxs)(p.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,a.jsx)(p.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,a.jsx)(p.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,a.jsx)(p.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsx)(g.W,{asset:b,exchange:(0,d.dq)(z*(0,m.su)(H)/k.Pq),balance:(0,d.dq)(D),amount:H,setAmount:F}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,a.jsx)(w.gPZ,{})}),(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.W,{amount:(0,d.ZM)(eT),onClick:()=>{G(3==C?"USB":"")},asset:"USB",exchange:(0,d.dq)(eT),readonly:!0,disable:C<=1,selected:"USB"===I}),(0,a.jsx)(g.W,{amount:(0,d.ZM)(ek),onClick:()=>{G(2==C?q.xTokenSymbol:"")},asset:q.xTokenSymbol,exchange:(0,d.dq)(K*(null!=ek?ek:0n)/k.Pq),readonly:!0,disable:C<=1,selected:I===q.xTokenSymbol})]}),(0,a.jsx)(N.v,{tx:"Mint",disabled:(0,m.su)(H)>D,onTxSuccess:()=>{F("")},config:ey,approves:{[q.assetTokenAddress]:(0,m.su)(H)},spender:q.vault})]})}),(0,a.jsx)(p.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,a.jsxs)("div",{className:"mt-4",children:[(0,a.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,a.jsx)(g.W,{amount:eN?"0":ep,setAmount:O,balance:(0,d.dq)(X),onClick:()=>{Q(2==C?"USB":""),et("USB")},asset:"USB",exchange:(0,d.dq)(eN?0n:(0,m.su)(ep)),readonly:J==q.xTokenSymbol,selected:"USB"===J}),(0,a.jsx)(g.W,{amount:eg?"0":ew,setAmount:$,asset:q.xTokenSymbol,onClick:()=>{Q(3==C?q.xTokenSymbol:""),et(q.xTokenSymbol)},exchange:(0,d.dq)(eg?0n:(0,m.su)(ew)*K/k.Pq),balance:(0,d.dq)(Y),readonly:"USB"==J,selected:J===q.xTokenSymbol})]}),(0,a.jsxs)("div",{className:"flex w-full items-center mb-6",children:[(0,a.jsx)("div",{className:"flex-1"}),(0,a.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 ",children:(0,a.jsx)(w.gPZ,{})}),(0,a.jsx)("div",{className:"flex-1 text-sm text-slate-400 text-end",children:"Redemption Fee: 0.5%"})]}),(0,a.jsx)("div",{className:"w-full text-end"}),(0,a.jsx)(g.W,{asset:q.assetTokenSymbol,amount:(0,d.dq)(eA),exchange:(0,d.dq)(z*(null!=eA?eA:0n)/k.Pq),readonly:!0}),(0,a.jsx)(N.v,{tx:"Redeem",config:eS,disabled:(0,m.su)(ep)>X||(0,m.su)(ew)>Y,onTxSuccess:()=>{O(""),$(""),Q(""),et("USB")},approves:eg?{[T.O[(0,l.B)()]]:(0,m.su)(L)}:eN?{[q.xTokenAddress]:(0,m.su)(W)}:{[q.xTokenAddress]:(0,m.su)(W),[T.O[(0,l.B)()]]:(0,m.su)(L)},spender:q.vault})]})})]})})]})}function VaultNetToken(e){var t;let{vc:s,showX:l}=e,n=l?s.xTokenSymbol:s.assetTokenSymbol,{prices:r}=(0,u.useContext)(i.FetcherContext),o=null!==(t=(0,d.dq)(r[n]))&&void 0!==t?t:"1";return(0,a.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,a.jsx)(c(),{width:32,height:32,src:"/".concat(n,".svg"),alt:"token"}),(0,a.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:n})]}),(0,a.jsx)("div",{className:"",children:(0,a.jsxs)("div",{className:"text-lg",children:["$",o]})})]})}function Vaults(){var e,t,s;let{aar:o,assetLocked:m,prices:x}=(0,u.useContext)(i.FetcherContext),v=n.iK[(0,l.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,a.jsxs)("div",{className:"w-full max-w-screen-xl px-4 mx-auto",children:[(0,a.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,a.jsxs)(r.r,{numItemsMd:2,className:"gap-3 mt-4",children:[(0,a.jsxs)("div",{className:"card",children:[(0,a.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,a.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:v&&(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(VaultNetToken,{vc:v}),(0,a.jsx)(VaultNetToken,{vc:v,showX:!0})]})}),(0,a.jsx)(r.i,{}),(0,a.jsxs)("div",{className:"w-full flex justify-between",children:[(0,a.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,a.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,a.jsx)(c(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,a.jsxs)("div",{children:[(0,d.dq)(m.ETH),(0,a.jsxs)("span",{children:["(~$",(0,d.dq)((null!==(e=m.ETH)&&void 0!==e?e:0n)*(null!==(t=x.ETH)&&void 0!==t?t:0n)/10n**18n),")"]})]})]})]}),(0,a.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,a.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,a.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,a.jsxs)("div",{children:[((null!==(s=o.ETH)&&void 0!==s?s:0)*100).toFixed(),"%"]})})]})]}),(0,a.jsx)(NetValue,{asset:"ETH"})]}),(0,a.jsx)(VaultCard,{asset:"ETH"})]})]})}},64020:function(e,t,s){"use strict";s.d(t,{C:function(){return Tip}});var a=s(57437),l=s(75224),n=s(71824);function Tip(e){let{children:t}=e;return(0,a.jsx)(l.zt,{children:(0,a.jsxs)(l.fC,{children:[(0,a.jsx)(l.xz,{asChild:!0,children:(0,a.jsx)("div",{className:"inline-block px-1",style:{verticalAlign:"text-bottom"},children:(0,a.jsx)(n.if7,{className:"inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,a.jsx)(l.h_,{children:(0,a.jsxs)(l.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:[t,(0,a.jsx)(l.Eh,{})]})})]})})}}},function(e){e.O(0,[27,33,61,986,335,129,818,602,857,203,342,971,472,744],function(){return e(e.s=26295)}),_N_E=e.O()}]);