(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{26341:function(e,s,t){Promise.resolve().then(t.bind(t,96873))},96873:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return M}});var l=t(9268),a=t(76394),n=t.n(a),i=t(83455),d=t(78592),o=t(52815),c=t(67992),r=t(85418),u=t(43534),x=t(56883),m=t(82899),v=t(68010),h=t(42485),j=t(82861),b=t(12120),f=t(86006),g=t(87782),S=t(2002),N=t(19707);let y="$USB";function p(e){var s,t,a,n,p,k,T,A,B;let{asset:w}=e,{balances:U,prices:M,vaultsMode:q}=(0,f.useContext)(h.FetcherContext),P=u.iK[(0,r.B)()].find(e=>e.assetTokenSymbol==w),C=u.jX[(0,r.B)()],R=q[P.assetTokenSymbol],[E,Z]=(0,f.useState)("mint"),[H,F]=(0,f.useMemo)(()=>{let e="mint"==E;return 3==R?["Downward Adjustment Model",e?"Minting ".concat(y," alone is feasible"):"Redeeming ".concat(P.xTokenSymbol," alone is feasible")]:2==R?["Upward Adjustment Model",e?"Minting ".concat(P.xTokenSymbol," alone is feasible"):"Redeeming ".concat(y," alone is feasible")]:["Stability Model",e?"".concat(y," and ").concat(P.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(y," and ").concat(P.xTokenSymbol)]},[R,P,E]),[V,L]=(0,f.useState)(""),[W,_]=(0,f.useState)(""),[z,$]=(0,f.useState)(""),D=null!==(A=M[P.assetTokenSymbol])&&void 0!==A?A:0n,K=null!==(B=M[P.xTokenSymbol])&&void 0!==B?B:0n,O=(0,f.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>e.symbol===w))||void 0===e?void 0:e.balance},[U]),Y=(0,f.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[U]),X=(0,f.useMemo)(()=>{var e;return null==U?void 0:null===(e=U.find(e=>e.symbol===w+"x"))||void 0===e?void 0:e.balance},[U]),[I,G]=(0,f.useState)(""),[J,Q]=(0,f.useState)(""),[ee,es]=(0,f.useState)("USB"),{data:[et,el,ea]=[void 0,void 0,void 0]}=(0,N.Dm)({contracts:[{abi:c.Z,address:C,functionName:R>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[P.vault,(0,v.su)(V||"0")]},{abi:c.Z,address:C,functionName:"calcMintUsbAboveAARU",args:[P.vault,(0,v.su)(V||"0")]},{abi:c.Z,address:C,functionName:"calcMintLeveragedTokensBelowAARS",args:[P.vault,(0,v.su)(V||"0")]}],watch:!0,enabled:"mint"==E}),{data:[en,ei,ed,eo,ec]=[void 0,void 0,void 0,void 0,void 0]}=(0,N.Dm)({contracts:[{abi:c.Z,address:C,functionName:"calcPairedRedeemAssetAmount",args:[P.vault,(0,v.su)(z||"0")]},{abi:c.Z,address:C,functionName:"calcPairdLeveragedTokenAmount",args:[P.vault,(0,v.su)(W||"0")]},{abi:c.Z,address:C,functionName:"calcPairedUsbAmount",args:[P.vault,(0,v.su)(z||"0")]},{abi:c.Z,address:C,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[P.vault,(0,v.su)(z||"0")]},{abi:c.Z,address:C,functionName:"calcRedeemByUsbBelowAARS",args:[P.vault,(0,v.su)(W||"0")]}],watch:!0,enabled:"redeem"==E}),er=J==P.xTokenSymbol,eu="USB"==J,ex=(0,f.useMemo)(()=>{let e={abi:o.Z,address:P.vault,args:[(0,v.su)(V)],value:P.assetTokenAddress==u.K8?(0,v.su)(V):0n,functionName:"mintPairsAtAdjustmentPhase"};return(0==R||1==R)&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==I&&(e.functionName="mintUSBAboveAARU"),I==P.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[R,I,V,P]),em=(0,f.useMemo)(()=>{let e={abi:o.Z,address:P.vault,functionName:"USB"==J?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==J?[(0,v.su)(W)]:[(0,v.su)(z)]};return J==P.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,v.su)(z)]),"USB"==J&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,v.su)(W)]),e},[R,J,W,z,P]),ev=I==P.xTokenSymbol?0n:"USB"===I?null==el?void 0:null===(s=el.result)||void 0===s?void 0:s[1]:null==et?void 0:null===(t=et.result)||void 0===t?void 0:t[1],eh="USB"==I?0n:I===P.xTokenSymbol?null==ea?void 0:null===(a=ea.result)||void 0===a?void 0:a[1]:null==et?void 0:null===(n=et.result)||void 0===n?void 0:n[2],ej="USB"==ee?W:(0,j.dq)(null==ed?void 0:ed.result),eb=ee==P.xTokenSymbol?z:(0,j.dq)(null==ei?void 0:ei.result),ef=er?null==eo?void 0:null===(p=eo.result)||void 0===p?void 0:p[1]:eu?null==ec?void 0:null===(k=ec.result)||void 0===k?void 0:k[1]:null==en?void 0:null===(T=en.result)||void 0===T?void 0:T[1];return(0,l.jsxs)("div",{className:(0,S.m)("card relative","Stability Model"==H?"bg-green-500/5":"bg-violet-500/5"),children:[(0,l.jsxs)("div",{className:"absolute top-[29px] right-6 flex flex-col items-end",children:[(0,l.jsxs)("div",{className:"text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit",children:[(0,l.jsx)("div",{className:(0,S.m)("w-3 h-3 rounded-full","Stability Model"==H?"bg-green-500":"bg-violet-500")}),(0,l.jsx)("div",{className:"text-indigo-700",children:H})]}),(0,l.jsx)("div",{className:"text-xs text-neutral-500",children:F})]}),(0,l.jsx)("div",{className:"relative flex items-center justify-between",children:(0,l.jsxs)(b.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>Z(e),children:[(0,l.jsxs)(b.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,l.jsx)(b.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,l.jsx)(b.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,l.jsx)(b.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(d.W,{asset:w,exchange:(0,j.dq)(D*(0,v.su)(V)/m.Pq),balance:(0,j.dq)(O),amount:V,setAmount:L}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(g.gPZ,{})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(d.W,{amount:(0,j.ZM)(ev),onClick:()=>{G(3==R?"USB":"")},asset:"USB",exchange:(0,j.dq)(ev),readonly:!0,disable:R<=1,selected:"USB"===I}),(0,l.jsx)(d.W,{amount:(0,j.ZM)(eh),onClick:()=>{G(2==R?P.xTokenSymbol:"")},asset:P.xTokenSymbol,exchange:(0,j.dq)(K*(null!=eh?eh:0n)/m.Pq),readonly:!0,disable:R<=1,selected:I===P.xTokenSymbol})]}),(0,l.jsx)(i.v,{tx:"Mint",config:ex,approves:{[P.assetTokenAddress]:(0,v.su)(V)},spender:P.vault})]})}),(0,l.jsx)(b.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(d.W,{amount:er?0n:ej,setAmount:_,balance:(0,j.dq)(Y),onClick:()=>{Q(2==R?"USB":""),es("USB")},asset:"USB",exchange:(0,j.dq)((0,v.su)(W)),readonly:J==P.xTokenSymbol,selected:"USB"===J}),(0,l.jsx)(d.W,{amount:eu?0n:eb,setAmount:$,asset:P.xTokenSymbol,onClick:()=>{Q(3==R?P.xTokenSymbol:""),es(P.xTokenSymbol)},exchange:(0,j.dq)((0,v.su)(z)*K/m.Pq),balance:(0,j.dq)(X),readonly:"USB"==J,selected:J===P.xTokenSymbol})]}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(g.gPZ,{})}),(0,l.jsx)(d.W,{asset:P.assetTokenSymbol,amount:(0,j.dq)(ef),exchange:(0,j.dq)(D*(null!=ef?ef:0n)/m.Pq),readonly:!0}),(0,l.jsx)(i.v,{tx:"Redeem",config:em,approves:eu?{[x.O[(0,r.B)()]]:(0,v.su)(W)}:er?{[P.xTokenAddress]:(0,v.su)(z)}:{[P.xTokenAddress]:(0,v.su)(z),[x.O[(0,r.B)()]]:(0,v.su)(W)},spender:P.vault})]})})]})})]})}var k=t(35931),T=t(82036),A=t(27374);function B(e){var s,t,a;let{asset:i}=e,{prices:d,vaultsState:o}=(0,f.useContext)(h.FetcherContext),c=u.iK[(0,r.B)()][0],x=null!==(s=d["".concat(i,"x")])&&void 0!==s?s:0n,m=o[c.vault],b=Math.max(0,1+1/((0,v.pF)(null!==(t=null==m?void 0:m.aar)&&void 0!==t?t:0n,null!==(a=null==m?void 0:m.AARDecimals)&&void 0!==a?a:0n)-1));return(0,l.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,l.jsx)(T.zt,{children:(0,l.jsxs)(T.fC,{children:[(0,l.jsx)(T.xz,{asChild:!0,children:(0,l.jsx)("div",{className:"inline-block px-1",children:(0,l.jsx)(A.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,l.jsx)(T.h_,{children:(0,l.jsxs)(T.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,l.jsx)(T.Eh,{})]})})]})}),(0,l.jsxs)(k.iA,{className:"mt-4 text-sm font-normal",children:[(0,l.jsx)(k.ss,{}),(0,l.jsxs)(k.RM,{children:[(0,l.jsxs)(k.SC,{children:[(0,l.jsxs)(k.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(n(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,l.jsx)(k.pj,{children:"Universal Stable Basis"}),(0,l.jsx)(k.pj,{}),(0,l.jsx)(k.pj,{className:"text-right",children:"$1"})]}),(0,l.jsxs)(k.SC,{children:[(0,l.jsxs)(k.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(n(),{src:"/".concat(i+"x",".svg"),width:20,height:20,alt:"ETHx"}),i,"x"]}),(0,l.jsxs)(k.pj,{children:[(0,l.jsxs)("span",{className:"text-base text-slate-700",children:[b.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,l.jsx)(k.pj,{}),(0,l.jsxs)(k.pj,{className:"text-right",children:["$",(0,j.dq)(x)]})]})]})]})]})}var w=t(30633);function U(e){var s,t;let{vc:a,showX:i}=e,d=i?a.xTokenSymbol:a.assetTokenSymbol,{prices:o}=(0,f.useContext)(h.FetcherContext),c=null!==(s=(0,j.dq)(o[d]))&&void 0!==s?s:"1";return parseFloat((0,w.d)(null!==(t=o[d])&&void 0!==t?t:1n)),(0,l.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(n(),{width:32,height:32,src:"/".concat(d,".svg"),alt:"token"}),(0,l.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:d})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"text-lg",children:["$",c]})})]})}function M(){var e,s,t;let{aar:a,assetLocked:i,prices:d}=(0,f.useContext)(h.FetcherContext),o=u.iK[(0,r.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,l.jsxs)("div",{className:"min-h-screen",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,l.jsxs)(k.rj,{numItemsMd:2,className:"gap-3 mt-8",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,l.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(U,{vc:o}),(0,l.jsx)(U,{vc:o,showX:!0})]})}),(0,l.jsx)(k.iz,{}),(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,l.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,l.jsx)(n(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,l.jsxs)("div",{children:[(0,j.dq)(i.ETH),(0,l.jsxs)("span",{children:["(~$",(0,j.dq)((null!==(e=i.ETH)&&void 0!==e?e:0n)*(null!==(s=d.ETH)&&void 0!==s?s:0n)/10n**18n),")"]})]})]})]}),(0,l.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,l.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,l.jsxs)("div",{children:[((null!==(t=a.ETH)&&void 0!==t?t:0)*100).toFixed(),"%"]})})]})]}),(0,l.jsx)(B,{asset:"ETH"})]}),(0,l.jsx)(p,{asset:"ETH"})]})]})}}},function(e){e.O(0,[482,166,524,656,728,216,119,778,790,624,220,49,342,916,253,961,560],function(){return e(e.s=26341)}),_N_E=e.O()}]);