(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[399],{26341:function(e,s,t){Promise.resolve().then(t.bind(t,96873))},96873:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return U}});var l=t(9268),a=t(76394),n=t.n(a),i=t(83455),d=t(78592),o=t(52815),c=t(67992),r=t(85418),u=t(43534),x=t(56883),m=t(68010),v=t(42485),h=t(82861),j=t(12120),b=t(86006),f=t(87782),g=t(2002),S=t(19707);let N="$USB";function y(e){var s,t,a,n,y,p,k,T,A;let{asset:B}=e,{balances:w,prices:U,vaultsMode:M}=(0,b.useContext)(v.FetcherContext),C=u.iK[(0,r.B)()].find(e=>e.assetTokenSymbol==B),R=u.jX[(0,r.B)()],q=M[C.assetTokenSymbol],[E,P]=(0,b.useState)("mint"),[Z,H]=(0,b.useMemo)(()=>{let e="mint"==E;return 3==q?["Downward Adjustment Model",e?"Minting ".concat(N," alone is feasible"):"Redeeming ".concat(C.xTokenSymbol," alone is feasible")]:2==q?["Upward Adjustment Model",e?"Minting ".concat(C.xTokenSymbol," alone is feasible"):"Redeeming ".concat(N," alone is feasible")]:["Stability Model",e?"".concat(N," and ").concat(C.xTokenSymbol," will be minted in fixed ratio"):"Redemption require a fixed ration of ".concat(N," and ").concat(C.xTokenSymbol)]},[q,C,E]),[F,V]=(0,b.useState)(""),[L,W]=(0,b.useState)(""),[_,z]=(0,b.useState)(""),$=null!==(T=U[C.assetTokenSymbol])&&void 0!==T?T:0n,D=null!==(A=U[C.xTokenSymbol])&&void 0!==A?A:0n,K=(0,b.useMemo)(()=>{var e;return null==w?void 0:null===(e=w.find(e=>e.symbol===B))||void 0===e?void 0:e.balance},[w]),O=(0,b.useMemo)(()=>{var e;return null==w?void 0:null===(e=w.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[w]),Y=(0,b.useMemo)(()=>{var e;return null==w?void 0:null===(e=w.find(e=>e.symbol===B+"x"))||void 0===e?void 0:e.balance},[w]),[X,I]=(0,b.useState)(""),[G,J]=(0,b.useState)(""),[Q,ee]=(0,b.useState)("USB"),{data:[es,et,el]=[void 0,void 0,void 0]}=(0,S.Dm)({contracts:[{abi:c.Z,address:R,functionName:q>1?"calcMintPairsAtAdjustmentPhase":"calcMintPairsAtStabilityPhase",args:[C.vault,(0,m.su)(F||"0")]},{abi:c.Z,address:R,functionName:"calcMintUsbAboveAARU",args:[C.vault,(0,m.su)(F||"0")]},{abi:c.Z,address:R,functionName:"calcMintLeveragedTokensBelowAARS",args:[C.vault,(0,m.su)(F||"0")]}],watch:!0,enabled:"mint"==E}),{data:[ea,en,ei,ed,eo]=[void 0,void 0,void 0,void 0,void 0]}=(0,S.Dm)({contracts:[{abi:c.Z,address:R,functionName:"calcPairedRedeemAssetAmount",args:[C.vault,(0,m.su)(_||"0")]},{abi:c.Z,address:R,functionName:"calcPairdLeveragedTokenAmount",args:[C.vault,(0,m.su)(L||"0")]},{abi:c.Z,address:R,functionName:"calcPairedUsbAmount",args:[C.vault,(0,m.su)(_||"0")]},{abi:c.Z,address:R,functionName:"calcRedeemByLeveragedTokenAboveAARU",args:[C.vault,(0,m.su)(_||"0")]},{abi:c.Z,address:R,functionName:"calcRedeemByUsbBelowAARS",args:[C.vault,(0,m.su)(L||"0")]}],watch:!0,enabled:"redeem"==E}),ec=G==C.xTokenSymbol,er="USB"==G,eu=(0,b.useMemo)(()=>{let e={abi:o.Z,address:C.vault,args:[(0,m.su)(F)],value:C.assetTokenAddress==u.K8?(0,m.su)(F):0n,functionName:"mintPairsAtAdjustmentPhase"};return(0==q||1==q)&&(e.functionName="mintPairsAtStabilityPhase"),"USB"==X&&(e.functionName="mintUSBAboveAARU"),X==C.xTokenSymbol&&(e.functionName="mintLeveragedTokensBelowAARS"),e},[q,X,F,C]),ex=(0,b.useMemo)(()=>{let e={abi:o.Z,address:C.vault,functionName:"USB"==G?"redeemByPairsWithExpectedUSBAmount":"redeemByPairsWithExpectedLeveragedTokenAmount",args:"USB"==G?[(0,m.su)(L)]:[(0,m.su)(_)]};return G==C.xTokenSymbol&&(e.functionName="redeemByLeveragedTokenAboveAARU",e.args=[(0,m.su)(_)]),"USB"==G&&(e.functionName="redeemByUsbBelowAARS",e.args=[(0,m.su)(L)]),e},[q,G,L,_,C]),em=X==C.xTokenSymbol?0n:"USB"===X?null==et?void 0:null===(s=et.result)||void 0===s?void 0:s[1]:null==es?void 0:null===(t=es.result)||void 0===t?void 0:t[1],ev="USB"==X?0n:X===C.xTokenSymbol?null==el?void 0:null===(a=el.result)||void 0===a?void 0:a[1]:null==es?void 0:null===(n=es.result)||void 0===n?void 0:n[2],eh="USB"==Q?L:(0,h.dq)(null==ei?void 0:ei.result),ej=Q==C.xTokenSymbol?_:(0,h.dq)(null==en?void 0:en.result),eb=ec?null==ed?void 0:null===(y=ed.result)||void 0===y?void 0:y[1]:er?null==eo?void 0:null===(p=eo.result)||void 0===p?void 0:p[1]:null==ea?void 0:null===(k=ea.result)||void 0===k?void 0:k[1];return(0,l.jsxs)("div",{className:(0,g.m)("card relative","Stability Model"==Z?"bg-green-500/5":"bg-violet-500/5"),children:[(0,l.jsxs)("div",{className:"absolute top-[29px] right-6 flex flex-col items-end",children:[(0,l.jsxs)("div",{className:"text-sm leading-5 flex items-center gap-1.5 rounded-full w-fit",children:[(0,l.jsx)("div",{className:(0,g.m)("w-3 h-3 rounded-full","Stability Model"==Z?"bg-green-500":"bg-violet-500")}),(0,l.jsx)("div",{className:"text-indigo-700",children:Z})]}),(0,l.jsx)("div",{className:"text-xs text-neutral-500",children:H})]}),(0,l.jsx)("div",{className:"relative flex items-center justify-between",children:(0,l.jsxs)(j.fC,{defaultValue:"mint",className:"w-full",onValueChange:e=>P(e),children:[(0,l.jsxs)(j.aV,{className:"bg-slate-100 p-1 w-fit rounded-md",children:[(0,l.jsx)(j.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"mint",children:"Mint"}),(0,l.jsx)(j.xz,{className:'rounded-[3px] text-sm py-1.5 px-3 text-slate-500 font-medium data-[state="active"]:bg-white data-[state="active"]:text-slate-900',value:"redeem",children:"Redeem"})]}),(0,l.jsx)(j.VY,{value:"mint",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsx)(d.W,{asset:B,exchange:(0,h.dq)($*(0,m.su)(F,0)),balance:(0,h.dq)(K),amount:F,setAmount:V}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(f.gPZ,{})}),(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(d.W,{amount:(0,h.ZM)(em),onClick:()=>{I(3==q?"USB":"")},asset:"USB",exchange:(0,h.dq)(em),readonly:!0,disable:q<=1,selected:"USB"===X}),(0,l.jsx)(d.W,{amount:(0,h.ZM)(ev),onClick:()=>{I(2==q?C.xTokenSymbol:"")},asset:C.xTokenSymbol,exchange:(0,h.dq)(D*(null!=ev?ev:0n)/10n**18n),readonly:!0,disable:q<=1,selected:X===C.xTokenSymbol})]}),(0,l.jsx)(i.v,{tx:"Mint",config:eu,approves:{[C.assetTokenAddress]:(0,m.su)(F)},spender:C.vault})]})}),(0,l.jsx)(j.VY,{value:"redeem",className:"flex flex-col gap-6",children:(0,l.jsxs)("div",{className:"mt-6",children:[(0,l.jsxs)("div",{className:"flex flex-col gap-2",children:[(0,l.jsx)(d.W,{amount:ec?0n:eh,setAmount:W,balance:(0,h.dq)(O),onClick:()=>{J(2==q?"USB":""),ee("USB")},asset:"USB",exchange:(0,h.dq)((0,m.su)(L)),readonly:G==C.xTokenSymbol,selected:"USB"===G}),(0,l.jsx)(d.W,{amount:er?0n:ej,setAmount:z,asset:C.xTokenSymbol,onClick:()=>{J(3==q?C.xTokenSymbol:""),ee(C.xTokenSymbol)},exchange:(0,h.dq)((0,m.su)(_)*D/10n**18n),balance:(0,h.dq)(Y),readonly:"USB"==G,selected:G===C.xTokenSymbol})]}),(0,l.jsx)("div",{className:"w-8 h-8 mx-auto flex items-center justify-center text-slate-400 rounded-full border border-slate-200 mb-6",children:(0,l.jsx)(f.gPZ,{})}),(0,l.jsx)(d.W,{asset:C.assetTokenSymbol,amount:(0,h.dq)(eb),exchange:(0,h.dq)($*(null!=eb?eb:0n)/10n**18n),readonly:!0}),(0,l.jsx)(i.v,{tx:"Redeem",config:ex,approves:er?{[x.O[(0,r.B)()]]:(0,m.su)(L)}:ec?{[C.xTokenAddress]:(0,m.su)(_)}:{[C.xTokenAddress]:(0,m.su)(_),[x.O[(0,r.B)()]]:(0,m.su)(L)},spender:C.vault})]})})]})})]})}var p=t(35931),k=t(82036),T=t(27374);function A(e){var s,t,a;let{asset:i}=e,{prices:d,vaultsState:o}=(0,b.useContext)(v.FetcherContext),c=u.iK[(0,r.B)()][0],x=null!==(s=d["".concat(i,"x")])&&void 0!==s?s:0n,j=o[c.vault],f=Math.max(0,1+1/((0,m.pF)(null!==(t=null==j?void 0:j.aar)&&void 0!==t?t:0n,null!==(a=null==j?void 0:j.AARDecimals)&&void 0!==a?a:0n)-1));return(0,l.jsxs)("h5",{className:"font-bold text-sm text-slate-700 mt-4",children:["Net Value",(0,l.jsx)(k.zt,{children:(0,l.jsxs)(k.fC,{children:[(0,l.jsx)(k.xz,{asChild:!0,children:(0,l.jsx)("div",{className:"inline-block px-1",children:(0,l.jsx)(T.if7,{className:"ml-1 inline-block w-[14px] h-[14px] stroke-slate-500"})})}),(0,l.jsx)(k.h_,{children:(0,l.jsxs)(k.VY,{className:"max-w-xs text-sm text-white bg-slate-900 rounded-md p-4",children:["The Net value is calculated based on the underlying assets and is backed by these assets. The Market Price on secondary markets might deviate from the Net value due to a variety of factors. Anyone can engage in arbitrage, and such actions will serve to eliminate these discrepancies.",(0,l.jsx)(k.Eh,{})]})})]})}),(0,l.jsxs)(p.iA,{className:"mt-4 text-sm font-normal",children:[(0,l.jsx)(p.ss,{}),(0,l.jsxs)(p.RM,{children:[(0,l.jsxs)(p.SC,{children:[(0,l.jsxs)(p.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(n(),{src:"/USB.svg",width:20,height:20,alt:"USB"}),"USB"]}),(0,l.jsx)(p.pj,{children:"Universal Stable Basis"}),(0,l.jsx)(p.pj,{}),(0,l.jsx)(p.pj,{className:"text-right",children:"$1"})]}),(0,l.jsxs)(p.SC,{children:[(0,l.jsxs)(p.pj,{className:"flex gap-2 px-0",children:[(0,l.jsx)(n(),{src:"/".concat(i+"x",".svg"),width:20,height:20,alt:"ETHx"}),i,"x"]}),(0,l.jsxs)(p.pj,{children:[(0,l.jsxs)("span",{className:"text-base text-slate-700",children:[f.toFixed(2),"x "]}),"Leveraged long on ETH"]}),(0,l.jsx)(p.pj,{}),(0,l.jsxs)(p.pj,{className:"text-right",children:["$",(0,h.dq)(x)]})]})]})]})]})}var B=t(30633);function w(e){var s,t;let{vc:a,showX:i}=e,d=i?a.xTokenSymbol:a.assetTokenSymbol,{prices:o}=(0,b.useContext)(v.FetcherContext),c=null!==(s=(0,h.dq)(o[d]))&&void 0!==s?s:"1";return parseFloat((0,B.d)(null!==(t=o[d])&&void 0!==t?t:1n)),(0,l.jsxs)("div",{className:"flex justify-between lg:justify-start gap-4 w-full items-center",children:[(0,l.jsxs)("div",{className:"flex flex-col justify-center items-center",children:[(0,l.jsx)(n(),{width:32,height:32,src:"/".concat(d,".svg"),alt:"token"}),(0,l.jsx)("div",{className:"text-xs text-neutral-700 mt-0.5",children:d})]}),(0,l.jsx)("div",{className:"",children:(0,l.jsxs)("div",{className:"text-lg",children:["$",c]})})]})}function U(){var e,s,t;let{aar:a,assetLocked:i,prices:d}=(0,b.useContext)(v.FetcherContext),o=u.iK[(0,r.B)()].find(e=>"ETH"==e.assetTokenSymbol);return(0,l.jsxs)("div",{className:"min-h-screen",children:[(0,l.jsx)("h2",{className:"text-2xl font-semibold text-neutral-900",children:"ETH Vault"}),(0,l.jsxs)(p.rj,{numItemsMd:2,className:"gap-3 mt-8",children:[(0,l.jsxs)("div",{className:"card",children:[(0,l.jsxs)("div",{className:"w-full text-sm px-4 py-6 bg-neutral-50 rounded-xl",children:[(0,l.jsx)("div",{className:"flex flex-col lg:flex-row items-center h-fit gap-4",children:o&&(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(w,{vc:o}),(0,l.jsx)(w,{vc:o,showX:!0})]})}),(0,l.jsx)(p.iz,{}),(0,l.jsxs)("div",{className:"w-full flex justify-between",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"Total Value Locked"}),(0,l.jsxs)("div",{className:"text-neutral-900 flex items-center gap-2",children:[(0,l.jsx)(n(),{width:20,height:20,src:"/ETH.svg",alt:"token"}),(0,l.jsxs)("div",{children:[(0,h.dq)(i.ETH),(0,l.jsxs)("span",{children:["(~$",(0,h.dq)((null!==(e=i.ETH)&&void 0!==e?e:0n)*(null!==(s=d.ETH)&&void 0!==s?s:0n)/10n**18n),")"]})]})]})]}),(0,l.jsxs)("div",{className:"w-full flex justify-between mt-2",children:[(0,l.jsx)("div",{className:"text-neutral-500",children:"AAR (Asset Adequacy Ratio):"}),(0,l.jsx)("div",{className:"text-neutral-900 flex items-center gap-2",children:(0,l.jsxs)("div",{children:[((null!==(t=a.ETH)&&void 0!==t?t:0)*100).toFixed(),"%"]})})]})]}),(0,l.jsx)(A,{asset:"ETH"})]}),(0,l.jsx)(y,{asset:"ETH"})]})]})}}},function(e){e.O(0,[482,166,524,656,728,948,119,778,790,624,220,426,342,916,253,961,560],function(){return e(e.s=26341)}),_N_E=e.O()}]);