(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{43269:function(e,t,s){Promise.resolve().then(s.bind(s,68143))},68143:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return w}});var n=s(9268),l=s(83455),a=s(78592),r=s(52815),i=s(67992),o=s(85418),c=s(43534),u=s(56883),d=s(82899),m=s(68010),x=s(42485),f=s(82861),h=s(76394),v=s.n(h),p=s(86006),g=s(87782),b=s(2002),j=s(19707);function w(){var e;let{vaultsMode:t,vaultsState:s,balances:h,prices:w}=(0,p.useContext)(x.FetcherContext),A=c.iK[(0,o.B)()].find(e=>"ETH"==e.assetTokenSymbol),N=t[A.assetTokenSymbol],y=(0,p.useMemo)(()=>N<=1?"No discount":"Discount available",[N]),R=s[A.assetTokenSymbol],T=N<=1;w[A.xTokenSymbol];let k=(0,p.useMemo)(()=>{var e;return null==h?void 0:null===(e=h.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[h]),[S,O]=(0,p.useMemo)(()=>{let e=(0,m.pF)(R.AARU,R.AARDecimals),t=(0,m.pF)(R.aar,R.AARDecimals),s=(0,m.pF)(R.AARS,R.AARDecimals),n=(0,m.pF)(R.AART,R.AARDecimals),l=e/2,a=t=>(100*Math.max(0,Math.min(1,(t-l)/(e-l)))).toFixed(2)+"%",r=a(t);return T?[r,a(s)]:[r,a(n)]},[R.AARU,R.aar,R.AARS,R.AART,T]),[D,C]=(0,p.useState)(""),{data:E}=(0,j.do)({watch:!0,abi:i.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[A.vault,(0,m.su)(D)]}),{data:B}=(0,j.do)({watch:!0,abi:i.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[A.vault,(0,m.su)("1")]}),L=(0,f.dq)(null!==(e=null==E?void 0:E[1])&&void 0!==e?e:0n),M=(0,p.useMemo)(()=>{var e;let t=null!==(e=null==B?void 0:B[1])&&void 0!==e?e:0n;return 0n==t?0n:(0,m.su)("1")/t},[]),_=(0,p.useMemo)(()=>{let e=w[A.xTokenSymbol];return!e||0n==e||0n==M||M>=e?"0.00%":(0,m.Jh)((e-M)*d.Pq/e,18,2)},[w[A.xTokenSymbol],M]),P=(0,n.jsxs)("div",{style:{position:"relative",left:S,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,n.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,n.jsx)("span",{className:"text-neutral-400",children:"Current AAR"}),(0,n.jsx)("span",{className:"font-medium",children:(0,m.Rr)(R.aar,R.AARDecimals)})]}),(0,n.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})})]}),U=(0,n.jsxs)("div",{style:{position:"relative",left:O,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,n.jsx)("svg",{className:"rotate-180",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})}),(0,n.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,n.jsx)("span",{className:"text-neutral-400",children:T?"Trigger discount":"Discount end"}),(0,n.jsxs)("span",{className:"font-medium",children:["AAR=",T?(0,m.Rr)(R.AARS,R.AARDecimals):(0,m.Rr)(R.AART,R.AARDecimals)]})]})]});return(0,n.jsxs)("div",{className:"pt-28 mx-auto max-w-screen-lg p-4",children:[(0,n.jsxs)("div",{className:"bg-indigo-50 p-6 lg:p-12 rounded-3xl relative",children:[(0,n.jsx)("h3",{className:"text-indigo-500 font-medium text-xl",children:"Discount Offer"}),(0,n.jsx)("div",{className:"text-indigo-900 mt-4 lg:w-3/4",children:"Due to fluctuations in the prices of underlying assets, when the AAR decreases, the protocol will offer users the opportunity to purchase xToken at a discount with $USB. This means that you can engage in arbitrage."}),(0,n.jsx)(v(),{src:"/discount.png",width:400,height:200,className:"lg:absolute lg:-right-8 lg:top-1/2 lg:-translate-y-1/2 mt-8",alt:""})]}),(0,n.jsxs)("div",{className:"mt-8 p-6 lg:p-16 border border-neutral-200 rounded-3xl",children:[(0,n.jsxs)("h3",{className:"text-3xl font-bold",children:[A.assetTokenSymbol," Vault"]}),(0,n.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,n.jsx)("div",{children:"State:"}),(0,n.jsxs)("div",{className:"flex items-center text-neutral-700 gap-1",children:[(0,n.jsx)("div",{className:(0,b.m)("w-3 h-3 rounded-full",N<=1?"bg-green-500":"bg-violet-500")}),y]})]}),(0,n.jsxs)("div",{className:"w-full bg-neutral-50 p-8 mt-8 rounded-lg flex flex-col gap-2",children:[P,(0,n.jsx)("div",{className:"h-px bg-neutral-300 after:content-['AAR'] after:inline-block after:text-right after:w-full after:text-xs after:text-neutral-500"}),U]}),(0,n.jsxs)("div",{className:"mt-4 text-neutral-700 text-sm",children:["Disount Rate: ",T?"N/A":_]}),(0,n.jsxs)("div",{className:"w-fit mx-auto mt-16",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 w-fit mx-auto",children:[(0,n.jsx)(a.W,{asset:"USB",amount:D,setAmount:C,balance:(0,f.dq)(k),price:"~$1.00"}),(0,n.jsx)("div",{className:"w-8 h-8 border border-neutral-200\xdf rounded-full flex items-center justify-center",children:(0,n.jsx)(g.gPZ,{className:"w-6 h-6 text-neutral-500"})}),(0,n.jsx)(a.W,{asset:A.xTokenSymbol,amount:L,price:N>1?"~$"+(0,f.dq)(M):"-",readonly:!0})]}),(0,n.jsx)(l.v,{tx:"Swap",config:{abi:r.Z,address:A.vault,functionName:"usbToLeveragedTokens",args:[(0,m.su)(D)],enabled:N>1},approves:{[u.O[(0,o.B)()]]:(0,m.su)(null!=D?D:0n)},spender:A.vault})]})]})]})}},83270:function(e,t,s){"use strict";s.d(t,{w_:function(){return o}});var n=s(86006),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(l),r=function(){return(r=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},i=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(s[n[l]]=e[n[l]]);return s};function o(e){return function(t){return n.createElement(c,r({attr:r({},e.attr)},t),function e(t){return t&&t.map(function(t,s){return n.createElement(t.tag,r({key:s},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var s,l=e.attr,a=e.size,o=e.title,c=i(e,["attr","size","title"]),u=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),n.createElement("svg",r({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,c,{className:s,style:r(r({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&n.createElement("title",null,o),e.children)};return void 0!==a?n.createElement(a.Consumer,null,function(e){return t(e)}):t(l)}},2002:function(e,t,s){"use strict";s.d(t,{m:function(){return a}});var n=s(35446),l=s(68741),a=(0,n.I)(l._)}},function(e){e.O(0,[482,166,656,728,216,119,342,916,253,961,560],function(){return e(e.s=43269)}),_N_E=e.O()}]);