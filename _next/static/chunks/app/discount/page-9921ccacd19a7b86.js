(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{43269:function(e,t,n){Promise.resolve().then(n.bind(n,68143))},68143:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return j}});var s=n(9268),l=n(83455),r=n(78592),a=n(52815),i=n(67992),o=n(85418),c=n(43534),u=n(56883),d=n(82899),m=n(68010),f=n(42485),x=n(82861),h=n(76394),v=n.n(h),g=n(86006),p=n(87782),b=n(2002),w=n(19707);function j(){var e;let{vaultsMode:t,vaultsState:n,balances:h,prices:j}=(0,g.useContext)(f.FetcherContext),N=c.iK[(0,o.B)()].find(e=>"ETH"==e.assetTokenSymbol),A=t[N.assetTokenSymbol],y=(0,g.useMemo)(()=>A<=1?"No discount":"Discount available",[A]),R=n[N.assetTokenSymbol],T=A<=1;j[N.xTokenSymbol];let k=(0,g.useMemo)(()=>{var e;return null==h?void 0:null===(e=h.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[h]),[S,O]=(0,g.useMemo)(()=>{let e=(0,m.pF)(R.AARU,R.AARDecimals),t=(0,m.pF)(R.aar,R.AARDecimals),n=(0,m.pF)(R.AARS,R.AARDecimals),s=(0,m.pF)(R.AART,R.AARDecimals),l=e/2,r=t=>((t-l)/(e-l)*100).toFixed(2)+"%",a=r(t);return T?[a,r(n)]:[a,r(s)]},[R.AARU,R.aar,R.AARS,R.AART,T]),[$,B]=(0,g.useState)(""),{data:D}=(0,w.do)({watch:!0,abi:i.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[N.vault,(0,m.su)($)]}),{data:E}=(0,w.do)({watch:!0,abi:i.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[N.vault,(0,m.su)("1")]}),C=(0,x.dq)(null!==(e=null==D?void 0:D[1])&&void 0!==e?e:0n),L=(0,g.useMemo)(()=>{var e;let t=null!==(e=null==E?void 0:E[1])&&void 0!==e?e:0n;return 0n==t?0n:(0,m.su)("1")/t},[]),M=(0,g.useMemo)(()=>{let e=j[N.xTokenSymbol];return!e||0n==e||0n==L||L>=e?"0.00%":(0,m.Jh)((e-L)*d.Pq/e,18,2)},[j[N.xTokenSymbol],L]),_=(0,s.jsxs)("div",{style:{position:"relative",left:S,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,s.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,s.jsx)("span",{className:"text-neutral-400",children:"Current AAR"}),(0,s.jsx)("span",{className:"font-medium",children:(0,m.Rr)(R.aar,R.AARDecimals)})]}),(0,s.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})})]}),I=(0,s.jsxs)("div",{style:{position:"relative",left:O,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,s.jsx)("svg",{className:"rotate-180",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,s.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})}),(0,s.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,s.jsx)("span",{className:"text-neutral-400",children:T?"Trigger discount":"Discount end"}),(0,s.jsxs)("span",{className:"font-medium",children:["AAR=",T?(0,m.Rr)(R.AARS,R.AARDecimals):(0,m.Rr)(R.AART,R.AARDecimals)]})]})]});return(0,s.jsxs)("div",{className:"pt-28 mx-auto max-w-screen-lg p-4",children:[(0,s.jsxs)("div",{className:"bg-indigo-50 p-6 lg:p-12 rounded-3xl relative",children:[(0,s.jsx)("h3",{className:"text-indigo-500 font-medium text-xl",children:"Discount Offer"}),(0,s.jsx)("div",{className:"text-indigo-900 mt-4 lg:w-3/4",children:"Due to fluctuations in the prices of underlying assets, when the AAR decreases, the protocol will offer users the opportunity to purchase xToken at a discount with $USB. This means that you can engage in arbitrage."}),(0,s.jsx)(v(),{src:"/discount.png",width:400,height:200,className:"lg:absolute lg:-right-8 lg:top-1/2 lg:-translate-y-1/2 mt-8",alt:""})]}),(0,s.jsxs)("div",{className:"mt-8 p-6 lg:p-16 border border-neutral-200 rounded-3xl",children:[(0,s.jsxs)("h3",{className:"text-3xl font-bold",children:[N.assetTokenSymbol," Vault"]}),(0,s.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,s.jsx)("div",{children:"State:"}),(0,s.jsxs)("div",{className:"flex items-center text-neutral-700 gap-1",children:[(0,s.jsx)("div",{className:(0,b.m)("w-3 h-3 rounded-full",A<=1?"bg-green-500":"bg-violet-500")}),y]})]}),(0,s.jsxs)("div",{className:"w-full bg-neutral-50 p-8 mt-8 rounded-lg flex flex-col gap-2",children:[_,(0,s.jsx)("div",{className:"h-px bg-neutral-300 after:content-['AAR'] after:inline-block after:text-right after:w-full after:text-xs after:text-neutral-500"}),I]}),(0,s.jsxs)("div",{className:"mt-4 text-neutral-700 text-sm",children:["Disount Rate: ",T?"N/A":M]}),(0,s.jsxs)("div",{className:"w-fit mx-auto mt-16",children:[(0,s.jsxs)("div",{className:"flex flex-col items-center gap-4 w-fit mx-auto",children:[(0,s.jsx)(r.W,{asset:"USB",amount:$,setAmount:B,balance:(0,x.dq)(k),price:"~$1.00"}),(0,s.jsx)("div",{className:"w-8 h-8 border border-neutral-200\xdf rounded-full flex items-center justify-center",children:(0,s.jsx)(p.gPZ,{className:"w-6 h-6 text-neutral-500"})}),(0,s.jsx)(r.W,{asset:N.xTokenSymbol,amount:C,price:A>1?"~$"+(0,x.dq)(L):"-",readonly:!0})]}),(0,s.jsx)(l.v,{tx:"Swap",config:{abi:a.Z,address:N.vault,functionName:"usbToLeveragedTokens",args:[(0,m.su)($)],enabled:A>1},approves:{[u.O[(0,o.B)()]]:(0,m.su)(null!=$?$:0n)},spender:N.vault})]})]})]})}},83270:function(e,t,n){"use strict";n.d(t,{w_:function(){return o}});var s=n(86006),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},r=s.createContext&&s.createContext(l),a=function(){return(a=Object.assign||function(e){for(var t,n=1,s=arguments.length;n<s;n++)for(var l in t=arguments[n])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},i=function(e,t){var n={};for(var s in e)Object.prototype.hasOwnProperty.call(e,s)&&0>t.indexOf(s)&&(n[s]=e[s]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,s=Object.getOwnPropertySymbols(e);l<s.length;l++)0>t.indexOf(s[l])&&Object.prototype.propertyIsEnumerable.call(e,s[l])&&(n[s[l]]=e[s[l]]);return n};function o(e){return function(t){return s.createElement(c,a({attr:a({},e.attr)},t),function e(t){return t&&t.map(function(t,n){return s.createElement(t.tag,a({key:n},t.attr),e(t.child))})}(e.child))}}function c(e){var t=function(t){var n,l=e.attr,r=e.size,o=e.title,c=i(e,["attr","size","title"]),u=r||t.size||"1em";return t.className&&(n=t.className),e.className&&(n=(n?n+" ":"")+e.className),s.createElement("svg",a({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,c,{className:n,style:a(a({color:e.color||t.color},t.style),e.style),height:u,width:u,xmlns:"http://www.w3.org/2000/svg"}),o&&s.createElement("title",null,o),e.children)};return void 0!==r?s.createElement(r.Consumer,null,function(e){return t(e)}):t(l)}},2002:function(e,t,n){"use strict";n.d(t,{m:function(){return r}});var s=n(35446),l=n(68741),r=(0,s.I)(l._)},13119:function(e,t,n){"use strict";n.d(t,{f:function(){return r}});var s=n(26359),l=n(30411);function r(e,t="wei"){return(0,l.v)(e,s.ez[t])}},30411:function(e,t,n){"use strict";function s(e,t){let[n,s="0"]=e.split("."),l=n.startsWith("-");if(l&&(n=n.slice(1)),s=s.replace(/(0+)$/,""),0===t)1===Math.round(Number(`.${s}`))&&(n=`${BigInt(n)+1n}`),s="";else if(s.length>t){let[e,l,r]=[s.slice(0,t-1),s.slice(t-1,t),s.slice(t)],a=Math.round(Number(`${l}.${r}`));(s=a>9?`${BigInt(e)+BigInt(1)}0`.padStart(e.length+1,"0"):`${e}${a}`).length>t&&(s=s.slice(1),n=`${BigInt(n)+1n}`),s=s.slice(0,t)}else s=s.padEnd(t,"0");return BigInt(`${l?"-":""}${n}${s}`)}n.d(t,{v:function(){return s}})}},function(e){e.O(0,[482,166,656,728,948,119,342,916,253,961,560],function(){return e(e.s=43269)}),_N_E=e.O()}]);