(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{33490:function(e,t,s){Promise.resolve().then(s.bind(s,23159))},23159:function(e,t,s){"use strict";s.r(t),s.d(t,{default:function(){return DiscountPage}});var n=s(57437),l=s(76036),a=s(80547),r=s(1150),i=s(90228),o=s(91056),c=s(72009),u=s(85156),d=s(8580),m=s(81628),x=s(99057),f=s(20373),h=s(16691),g=s.n(h),v=s(2265),p=s(41697),b=s(35769),j=s(56926);function DiscountPage(){var e,t,s,h,w;let{vaultsMode:N,vaultsState:A,balances:y,prices:_}=(0,v.useContext)(x.FetcherContext),R=c.iK[(0,o.B)()].find(e=>"ETH"==e.assetTokenSymbol),T=N[R.assetTokenSymbol],k=2==T,S=k?"Discount available":"No discount",P=A[R.assetTokenSymbol],O=!k,D=null!==(e=_[R.xTokenSymbol])&&void 0!==e?e:0n,B=(0,v.useMemo)(()=>{var e;return null==y?void 0:null===(e=y.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[y]),[E,C]=(0,v.useMemo)(()=>{let e=(0,m.pF)(P.AARU,P.AARDecimals),t=(0,m.pF)(P.aar,P.AARDecimals),s=(0,m.pF)(P.AARS,P.AARDecimals),n=(0,m.pF)(P.AART,P.AARDecimals),l=e/2,toPercent=t=>(100*Math.max(0,Math.min(1,(t-l)/(e-l)))).toFixed(2)+"%",a=toPercent(t);return O?[a,toPercent(s)]:[a,toPercent(n)]},[P.AARU,P.aar,P.AARS,P.AART,O]),[q,L]=(0,v.useState)(""),{data:M}=(0,j.do)({watch:!0,abi:i.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[R.vault,(0,m.su)(q)]}),{data:U}=(0,j.do)({watch:!0,abi:i.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[R.vault,(0,m.su)("1")]}),F=(0,f.dq)(null!==(t=null==M?void 0:M[1])&&void 0!==t?t:0n),I=null!==(s=null==U?void 0:U[1])&&void 0!==s?s:0n,Z=(0,v.useMemo)(()=>0n==I?0n:(0,m.su)("1")*d.Pq/I,[I]),z=(0,v.useMemo)(()=>{let e=_[R.xTokenSymbol];return!e||0n==e||0n==Z||Z>=e?"0.00%":(0,m.Jh)((e-Z)*d.Pq/e,18,2)},[_[R.xTokenSymbol],Z]),W=(0,n.jsxs)("div",{style:{position:"relative",left:E,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,n.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,n.jsx)("span",{className:"text-neutral-400",children:"Current AAR"}),(0,n.jsx)("span",{className:"font-medium",children:(0,m.Rr)(P.aar,P.AARDecimals)})]}),(0,n.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})})]}),G=(0,n.jsxs)("div",{style:{position:"relative",left:C,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,n.jsx)("svg",{className:"rotate-180",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,n.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})}),(0,n.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,n.jsx)("span",{className:"text-neutral-400",children:O?"Trigger discount":"Discount end"}),(0,n.jsxs)("span",{className:"font-medium",children:["AAR=",O?(0,m.Rr)(P.AARS,P.AARDecimals):(0,m.Rr)(P.AART,P.AARDecimals)]})]})]});return(0,n.jsxs)("div",{className:"mx-auto max-w-screen-lg p-4",children:[(0,n.jsxs)("div",{className:"bg-indigo-50 p-6 lg:p-12 rounded-3xl relative",children:[(0,n.jsx)("h3",{className:"text-indigo-500 font-medium text-xl",children:"Discount Offer"}),(0,n.jsx)("div",{className:"text-indigo-900 mt-4 lg:w-3/4",children:"Due to fluctuations in the prices of underlying assets, when the AAR decreases, the protocol will offer users the opportunity to purchase xToken at a discount with $USB. This means that you can engage in arbitrage."}),(0,n.jsx)(g(),{src:"/discount.png",width:400,height:200,className:"lg:absolute lg:-right-8 lg:top-1/2 lg:-translate-y-1/2 mt-8",alt:""})]}),(0,n.jsxs)("div",{className:"grid grid-cols-2 gap-8 border border-neutral-200 rounded-3xl mt-8 p-6",children:[(0,n.jsxs)("div",{className:"",children:[(0,n.jsxs)("h3",{className:"text-3xl font-bold",children:[R.assetTokenSymbol," Vault"]}),(0,n.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,n.jsx)("div",{children:"State:"}),(0,n.jsxs)("div",{className:"flex items-center text-neutral-700 gap-1",children:[(0,n.jsx)("div",{className:(0,b.m)("w-3 h-3 rounded-full",k?"bg-violet-500":"bg-green-500")}),S]})]}),(0,n.jsxs)("div",{className:"w-full bg-neutral-50 p-8 rounded-lg flex flex-col gap-2",children:[W,(0,n.jsx)("div",{className:"h-px bg-neutral-300 after:content-['AAR'] after:inline-block after:text-right after:w-full after:text-xs after:text-neutral-500"}),G]}),(0,n.jsxs)("div",{className:"mt-4 text-neutral-700 text-sm",children:["Disount Rate: ",O?"N/A":z]})]}),(0,n.jsxs)("div",{className:"w-full",children:[(0,n.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full mx-auto",children:[(0,n.jsx)(a.W,{asset:"USB",amount:q,setAmount:L,balance:(0,f.dq)(B),exchange:(0,f.dq)((0,m.su)(q)*(null!==(h=_.USB)&&void 0!==h?h:d.Pq)/d.Pq)}),(0,n.jsx)("div",{className:"w-8 h-8 border border-neutral-200 rounded-full flex items-center justify-center",children:(0,n.jsx)(p.gPZ,{className:"w-6 h-6 text-neutral-500"})}),(0,n.jsx)(a.W,{asset:R.xTokenSymbol,amount:F,exchange:(0,f.dq)(D*(null!==(w=null==M?void 0:M[1])&&void 0!==w?w:0n)/d.Pq),readonly:!0})]}),(0,n.jsx)(l.v,{tx:"Swap",config:{abi:r.Z,address:R.vault,functionName:"usbToLeveragedTokens",args:[(0,m.su)(q)],enabled:k},approves:{[u.O[(0,o.B)()]]:(0,m.su)(null!=q?q:0n)},spender:R.vault})]})]})]})}},91172:function(e,t,s){"use strict";s.d(t,{w_:function(){return GenIcon}});var n=s(2265),l={color:void 0,size:void 0,className:void 0,style:void 0,attr:void 0},a=n.createContext&&n.createContext(l),__assign=function(){return(__assign=Object.assign||function(e){for(var t,s=1,n=arguments.length;s<n;s++)for(var l in t=arguments[s])Object.prototype.hasOwnProperty.call(t,l)&&(e[l]=t[l]);return e}).apply(this,arguments)},__rest=function(e,t){var s={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&0>t.indexOf(n)&&(s[n]=e[n]);if(null!=e&&"function"==typeof Object.getOwnPropertySymbols)for(var l=0,n=Object.getOwnPropertySymbols(e);l<n.length;l++)0>t.indexOf(n[l])&&Object.prototype.propertyIsEnumerable.call(e,n[l])&&(s[n[l]]=e[n[l]]);return s};function GenIcon(e){return function(t){return n.createElement(IconBase,__assign({attr:__assign({},e.attr)},t),function Tree2Element(e){return e&&e.map(function(e,t){return n.createElement(e.tag,__assign({key:t},e.attr),Tree2Element(e.child))})}(e.child))}}function IconBase(e){var elem=function(t){var s,l=e.attr,a=e.size,r=e.title,i=__rest(e,["attr","size","title"]),o=a||t.size||"1em";return t.className&&(s=t.className),e.className&&(s=(s?s+" ":"")+e.className),n.createElement("svg",__assign({stroke:"currentColor",fill:"currentColor",strokeWidth:"0"},t.attr,l,i,{className:s,style:__assign(__assign({color:e.color||t.color},t.style),e.style),height:o,width:o,xmlns:"http://www.w3.org/2000/svg"}),r&&n.createElement("title",null,r),e.children)};return void 0!==a?n.createElement(a.Consumer,null,function(e){return elem(e)}):elem(l)}},35769:function(e,t,s){"use strict";s.d(t,{m:function(){return a}});var n=s(48362),l=s(17783),a=(0,n.I)(l._)}},function(e){e.O(0,[27,33,986,335,129,424,203,342,971,472,744],function(){return e(e.s=33490)}),_N_E=e.O()}]);