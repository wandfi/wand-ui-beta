(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[143],{33490:function(e,s,t){Promise.resolve().then(t.bind(t,23159))},23159:function(e,s,t){"use strict";t.r(s),t.d(s,{default:function(){return DiscountPage}});var l=t(57437),n=t(76036),a=t(80547),i=t(1150),r=t(90228),o=t(91056),c=t(72009),d=t(85156),u=t(8580),x=t(81628),m=t(99057),f=t(20373),h=t(16691),g=t.n(h),v=t(2265),p=t(41697),j=t(35769),A=t(56926);function DiscountPage(){var e,s,t,h,b;let{vaultsMode:w,vaultsState:N,balances:R,prices:T}=(0,v.useContext)(m.FetcherContext),y=c.iK[(0,o.B)()].find(e=>"ETH"==e.assetTokenSymbol),S=w[y.assetTokenSymbol],k=2==S,D=k?"Discount available":"No discount",P=N[y.assetTokenSymbol],B=!k,q=null!==(e=T[y.xTokenSymbol])&&void 0!==e?e:0n,L=(0,v.useMemo)(()=>{var e;return null==R?void 0:null===(e=R.find(e=>"USB"===e.symbol))||void 0===e?void 0:e.balance},[R]),[M,U]=(0,v.useMemo)(()=>{let e=(0,x.pF)(P.AARU,P.AARDecimals),s=(0,x.pF)(P.aar,P.AARDecimals),t=(0,x.pF)(P.AARS,P.AARDecimals),l=(0,x.pF)(P.AART,P.AARDecimals),n=e/2,toPercent=s=>(100*Math.max(0,Math.min(1,(s-n)/(e-n)))).toFixed(2)+"%",a=toPercent(s);return B?[a,toPercent(t)]:[a,toPercent(l)]},[P.AARU,P.aar,P.AARS,P.AART,B]),[_,F]=(0,v.useState)(""),{data:Z}=(0,A.do)({watch:!0,abi:r.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[y.vault,(0,x.su)(_)]}),{data:C}=(0,A.do)({watch:!0,abi:r.Z,address:c.jX[(0,o.B)()],functionName:"calcUsbToLeveragedTokens",args:[y.vault,(0,x.su)("1")]}),E=(0,f.dq)(null!==(s=null==Z?void 0:Z[1])&&void 0!==s?s:0n),O=null!==(t=null==C?void 0:C[1])&&void 0!==t?t:0n,W=(0,v.useMemo)(()=>0n==O?0n:(0,x.su)("1")*u.Pq/O,[O]),X=(0,v.useMemo)(()=>{let e=T[y.xTokenSymbol];return!e||0n==e||0n==W||W>=e?"0.00%":(0,x.Jh)((e-W)*u.Pq/e,18,2)},[T[y.xTokenSymbol],W]),H=(0,l.jsxs)("div",{style:{position:"relative",left:M,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,l.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,l.jsx)("span",{className:"text-neutral-400",children:"Current AAR"}),(0,l.jsx)("span",{className:"font-medium",children:(0,x.Rr)(P.aar,P.AARDecimals)})]}),(0,l.jsx)("svg",{width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})})]}),I=(0,l.jsxs)("div",{style:{position:"relative",left:U,transform:"translate(-50%,0)"},className:"flex flex-col items-center w-fit rounded-sm",children:[(0,l.jsx)("svg",{className:"rotate-180",width:"10",height:"8",viewBox:"0 0 10 8",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:(0,l.jsx)("path",{d:"M5 7.5L0.669873 -7.57104e-07L9.33013 0L5 7.5Z",fill:"#262626"})}),(0,l.jsxs)("div",{className:"text-xs text-white flex flex-col justify-center items-center bg-neutral-800 p-1.5 px-4 rounded-md",children:[(0,l.jsx)("span",{className:"text-neutral-400",children:B?"Trigger discount":"Discount end"}),(0,l.jsxs)("span",{className:"font-medium",children:["AAR=",B?(0,x.Rr)(P.AARS,P.AARDecimals):(0,x.Rr)(P.AART,P.AARDecimals)]})]})]});return(0,l.jsxs)("div",{className:"mx-auto max-w-screen-lg p-4",children:[(0,l.jsxs)("div",{className:"bg-indigo-50 p-6 lg:p-12 rounded-3xl relative",children:[(0,l.jsx)("h3",{className:"text-indigo-500 font-medium text-xl",children:"Discount Offer"}),(0,l.jsx)("div",{className:"text-indigo-900 mt-4 lg:w-3/4",children:"Due to fluctuations in the prices of underlying assets, when the AAR decreases, the protocol will offer users the opportunity to purchase xToken at a discount with $USB. This means that you can engage in arbitrage."}),(0,l.jsx)(g(),{src:"/discount.png",width:400,height:200,className:"lg:absolute lg:-right-8 lg:top-1/2 lg:-translate-y-1/2 mt-8",alt:""})]}),(0,l.jsxs)("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4 sm:gap-8 border border-neutral-200 rounded-3xl mt-8 p-6",children:[(0,l.jsxs)("div",{className:"",children:[(0,l.jsxs)("h3",{className:"text-3xl font-bold",children:[y.assetTokenSymbol," Vault"]}),(0,l.jsxs)("div",{className:"text-sm flex items-center gap-2",children:[(0,l.jsx)("div",{children:"State:"}),(0,l.jsxs)("div",{className:"flex items-center text-neutral-700 gap-1",children:[(0,l.jsx)("div",{className:(0,j.m)("w-3 h-3 rounded-full",k?"bg-violet-500":"bg-green-500")}),D]})]}),(0,l.jsxs)("div",{className:"w-full bg-neutral-50 p-8 rounded-lg flex flex-col gap-2",children:[H,(0,l.jsx)("div",{className:"h-px bg-neutral-300 after:content-['AAR'] after:inline-block after:text-right after:w-full after:text-xs after:text-neutral-500"}),I]})]}),(0,l.jsxs)("div",{className:"w-full",children:[(0,l.jsxs)("div",{className:"flex flex-col items-center gap-4 w-full mx-auto",children:[(0,l.jsx)(a.W,{asset:"USB",amount:_,setAmount:F,balance:(0,f.dq)(L),exchange:(0,f.dq)((0,x.su)(_)*(null!==(h=T.USB)&&void 0!==h?h:u.Pq)/u.Pq)}),(0,l.jsxs)("div",{className:"flex items-center justify-center w-full",children:[(0,l.jsx)("div",{className:"flex-1"}),(0,l.jsx)(p.gPZ,{className:"w-6 h-6 text-neutral-500  border border-neutral-200 rounded-full"}),(0,l.jsxs)("div",{className:"flex-1 text-end text-neutral-700 text-sm whitespace-nowrap",children:["Disount Rate: ",B?"N/A":X]})]}),(0,l.jsx)(a.W,{asset:y.xTokenSymbol,amount:E,exchange:(0,f.dq)(q*(null!==(b=null==Z?void 0:Z[1])&&void 0!==b?b:0n)/u.Pq),readonly:!0})]}),(0,l.jsx)(n.v,{tx:"Swap",disabled:(0,x.su)(_)>L,onTxSuccess:()=>{F("")},config:{abi:i.Z,address:y.vault,functionName:"usbToLeveragedTokens",args:[(0,x.su)(_)],enabled:k},approves:{[d.O[(0,o.B)()]]:(0,x.su)(null!=_?_:0n)},spender:y.vault})]})]})]})}},35769:function(e,s,t){"use strict";t.d(s,{m:function(){return a}});var l=t(48362),n=t(17783),a=(0,l.I)(n._)}},function(e){e.O(0,[27,33,986,335,129,818,203,342,971,472,744],function(){return e(e.s=33490)}),_N_E=e.O()}]);